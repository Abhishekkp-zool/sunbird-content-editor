EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.assessmentbrowser-1.0/editor/assessmentbrowser_util.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.assessmentbrowser-1.0/editor/libs/xml2json.js'>"))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.assessmentbrowser","ver":"1.0","shortId":"assessmentbrowser","author":"Santhosh Vasabhaktula","title":"AssessmentBrowser Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"plugin","plugin":"org.ekstep.conceptselector","ver":"1.0"},{"type":"js","src":"editor/assessmentbrowser_util.js"},{"type":"js","src":"editor/libs/xml2json.js"}]}},eval('EkstepEditor.basePlugin.extend({type:"assessmentbrowser",previewURL:"preview/preview.html?webview=true",callback:function(){},initialize:function(){EkstepEditorAPI.addEventListener(this.manifest.id+":show",this.showAssessmentBrowser,this),setTimeout(function(){var e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.assessmentbrowser-1.0/editor/assessmentbrowser.html",s=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.assessmentbrowser-1.0/editor/assessmentbrowserapp.js";EkstepEditorAPI.getService("popup").loadNgModules(e,s)},1e3)},showAssessmentBrowser:function(e,s){var t=this;this.callback=s,EkstepEditorAPI.getService("popup").open({template:"assessmentbrowser",controller:"assessmentbrowsercontroller",controllerAs:"$ctrl",resolve:{instance:function(){return t}},width:900,showClose:!1,className:"ngdialog-theme-plain"})}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.assetbrowser-1.0/editor/recorder/wave/wavesurfer.min.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.assetbrowser-1.0/editor/recorder/angular-audio-recorder.js'>"))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.assetbrowser","ver":"1.0","shortId":"assetbrowser","author":"Sunil A S","title":"Asset Browser","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/recorder/wave/wavesurfer.min.js"},{"type":"js","src":"editor/recorder/angular-audio-recorder.js"}]}},eval('EkstepEditor.basePlugin.extend({type:"assetbrowser",initData:void 0,cb:void 0,initialize:function(){EkstepEditorAPI.addEventListener(this.manifest.id+":show",this.initPreview,this),setTimeout(function(){var e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.assetbrowser-1.0/editor/assetBrowser.html",t=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.assetbrowser-1.0/editor/assetbrowserapp.js";EkstepEditorAPI.getService("popup").loadNgModules(e,t)},1e3)},initPreview:function(e,t){var i=this;this.cb=t.callback,this.mediaType=t.type,this.search_filter=t.search_filter,EkstepEditorAPI.getService("popup").open({template:"partials/assetbrowser.html",controller:"browsercontroller",controllerAs:"$ctrl",resolve:{instance:function(){return i}},showClose:!1,className:"ngdialog-theme-plain"})},getAsset:function(e,t,i,s){var r,o,n,l=new EkstepEditor.iService;r={request:{filters:{mediaType:t,contentType:"Asset",status:new Array("Live","Review","Draft")},limit:50}},o={headers:{"Content-Type":"application/json","user-id":"ATTool"}},EkstepEditorAPI._.isUndefined(e)?null:r.request.query=e,EkstepEditorAPI._.isUndefined(i)?(r.request.filters.license="Creative Commons Attribution (CC BY)",n=EkstepEditorAPI._.omit(this.search_filter,["mediaType","license","limit"])):(r.request.filters.portalOwner=i,n=EkstepEditorAPI._.omit(this.search_filter,["mediaType","limit","portalOwner"])),EkstepEditorAPI._.merge(r.request.filters,n),l.http.post(EkstepEditorAPI.baseURL+EkstepEditorAPI.apislug+"/search/v2/search",r,o,s)},showAssetBrowser:function(e,t){},fileValidation:function(e,t,i){if(window.File&&window.FileList&&window.Blob){var s=EkstepEditorAPI.jQuery("#"+e)[0].files[0].size,r=EkstepEditorAPI.jQuery("#"+e)[0].files[0].type;return s>t?(alert("File size is higher than the allowed size!"),!1):!r||(EkstepEditorAPI.jQuery.inArray(r,i)!=-1||(alert("File type is not allowed!"),!1))}return!0}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.wordbrowser","ver":"1.0","shortId":"wordbrowser","author":"Swati Singh","title":"Word Browser","description":"","publishedDate":"","editor":{"main":"editor/plugin.js"}},eval('EkstepEditor.basePlugin.extend({type:"wordbrowser",initData:void 0,initialize:function(){console.log("initialized word browser"),EkstepEditorAPI.addEventListener(this.manifest.id+":show",this.initPreview,this)},cb:function(){},initPreview:function(e,t){console.log("initpriview : word browser");var s=this;this.cb=t.callback,this.mediaType=t.type,this.search_filter=t.search_filter,this.loadResource("editor/wordBrowser.html","html",function(e,t){s.showAssetBrowser(e,t)})},getAsset:function(e,t){var s,o,i=new EkstepEditor.iService;s={request:{filters:{objectType:["Word"],status:["Live"],graph_id:["hi"],pos:[],grade:[]}}},o={headers:{"content-type":"application/json","user-id":"ilimi"}},i.http.post(EkstepEditor.config.baseURL+"/api/search/v2/search",s,o,t)},showAssetBrowser:function(e,t){EkstepEditorAPI.getService("popup").open({template:t,data:{instance:this}},this.browserController)},browserController:function(e,t,s){function o(t,s){s&&s.data.result.words?(e.loadingImage=!1,e.words=[],e.words=s.data.result.words,console.log("===============words================"),console.log(e.words)):e.words=[],EkstepEditorAPI.getAngularScope().safeApply()}var i=s.instance;e.grades=[],e.types=["Noun","Pronoun","Verb","Adjective","Adverb","Preposition","Conjunction","Interjection"],e.attributes=[{value:"pictures",name:"Image"},{value:"primaryMeaningId",name:"Meaning"},{value:"pronunciations",name:"Pronunciation"},{value:"pos",name:"POS"},{value:"exampleSentences",name:"Example Sentences"},{value:"hasSynonyms",name:"Synonyms"},{value:"hasAntonyms",name:"Antonyms"}],e.selectedWords=[],e.isSelected=[],e.selectBtnDisable=!0,i.getAsset(void 0,o),e.searchKeyPress=function(){},e.cancel=function(){EkstepEditorAPI.jQuery(".ui.modal").modal("hide")},e.toggleSelection=function(t,s){console.log(s),"word-selected"==e.isSelected[t]?(e.isSelected[t]="",e.selectedWords.splice(s,1)):(e.isSelected[t]="word-selected",e.selectedWords.push(s)),console.log(t),console.log(e.selectedWords)},e.select=function(){i.cb(e.selectedWords),e.cancel()}}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.spectrum-1.0/editor/libs/spectrum.js'>"))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.spectrum-1.0/editor/libs/spectrum.css'>")
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.spectrum-1.0/editor/spectrumplugin.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.spectrum","ver":"1.0","author":"Chetan Sachdev","title":"Spectrum Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/libs/spectrum.js"},{"type":"css","src":"editor/libs/spectrum.css"},{"type":"css","src":"editor/spectrumplugin.css"}],"menu":[]},"renderer":{}},eval('EkstepEditor.basePlugin.extend({type:"spectrum",picker:[],initialize:function(){EkstepEditorAPI.addEventListener("colorpicker:state",this.invoke,this)},invoke:function(e,t){"added"!=EkstepEditorAPI.jQuery("#"+t.id).attr("colorpicker")&&(this.picker[t.id]=EkstepEditorAPI.jQuery("#"+t.id).spectrum({color:"#FF0000",showInput:!0,showAlpha:!1,preferredFormat:"hex",showButtons:!1,containerClassName:"awesome",clickoutFiresChange:!1,showButtons:!0,change:function(e){t.callback(t.id,e.toHexString())},showPaletteOnly:!0,togglePaletteOnly:!0,togglePaletteMoreText:"more",togglePaletteLessText:"less",color:"blanchedalmond",palette:[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]],maxSelectionSize:10,hideAfterPaletteSelect:!0,move:function(e){t.callback(t.id,e.toHexString())}}),EkstepEditorAPI.jQuery("#"+t.id).attr("colorpicker","added")),t&&t.color?EkstepEditorAPI.jQuery("#"+t.id).spectrum("set",t.color):EkstepEditorAPI.jQuery("#"+t.id).spectrum("set","#000000")}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.conceptselector-1.0/editor/semantic-ui-tree-picker.js'>"))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.conceptselector-1.0/editor/semantic-ui-tree-picker.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.conceptselector","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Concept Selector Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/semantic-ui-tree-picker.js"},{"type":"css","src":"editor/semantic-ui-tree-picker.css"}]}},eval('EkstepEditor.basePlugin.extend({conceptData:void 0,callback:void 0,limit:200,selectors:[],concepts:[],initialize:function(){var t=this;t.getConcept(0,t.limit,t,function(){t.initData(t)}),EkstepEditorAPI.addEventListener(t.manifest.id+":init",this.initConceptBrowser,this)},initData:function(t){function e(t,i){var n=[];return EkstepEditorAPI._.forEach(i,function(a){if(void 0!=a.parent&&a.parent[0]==t){var r={};r.id=a.identifier,r.name=a.name,r.selectable="selectable",r.nodes=e(a.identifier,i),n.push(r)}}),n}var t=t||this,i=[],n={request:{filters:{objectType:["Dimension","Domain"]}}};EkstepEditorAPI.getService("searchService").search(n,function(n,a){!n&&a.data&&a.data.result&&EkstepEditorAPI._.isArray(a.data.result.domains)&&EkstepEditorAPI._.forEach(a.data.result.domains,function(n){var r={};r.id=n.identifier,r.name=n.name;var s=[];EkstepEditorAPI._.forEach(e(n.identifier,a.data.result.dimensions),function(i){var n={};n.id=i.id,n.name=i.name,n.nodes=e(i.id,t.concepts),s.push(n)}),r.nodes=s,i.push(r)})}),this.conceptData=i},getConcept:function(t,e,i,n){var i=i||this;t=t||0,e=e||i.limit;var a={request:{filters:{objectType:["Concept"]},offset:t,limit:e}};EkstepEditorAPI.getService("searchService").search(a,function(a,r){!a&&r.data&&r.data.result&&EkstepEditorAPI._.isArray(r.data.result.concepts)&&(EkstepEditorAPI._.forEach(r.data.result.concepts,function(t){i.concepts.push(t)}),r.data.result.count>e?(t=r.data.result.count-e,e+=e,i.getConcept(t,e,i,n)):n(i))})},initConceptBrowser:function(t,e){var i=this;i.selectors.indexOf(e.element)==-1&&setTimeout(function(){EkstepEditorAPI.jQuery("#"+e.element).treePicker({data:i.conceptData,name:"Concepts",picked:e.selectedConcepts,onSubmit:function(t){e.callback(t)},minSearchQueryLength:1})},1e3)}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.config-1.0/editor/libs/jquery-ui.min.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.config-1.0/editor/libs/micromarkdown.min.js'>"))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.config-1.0/editor/config.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.config","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Config Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/libs/jquery-ui.min.js"},{"type":"js","src":"editor/libs/micromarkdown.min.js"},{"type":"css","src":"editor/config.css"}],"menu":[{"id":"settings","category":"config","type":"icon","toolTip":"Settings","title":"Settings","iconClass":"settings icon","onclick":{"id":"config:settings:show"}},{"id":"help","category":"config","type":"icon","toolTip":"Help","title":"Help","iconClass":"help icon","onclick":{"id":"config:help:show"}},{"id":"comments","category":"config","type":"icon","toolTip":"Comments","title":"Comments","iconClass":"comments icon","onclick":{"id":"config:comments:show"}}]}},eval('EkstepEditor.basePlugin.extend({canvasOffset:void 0,selectedPluginId:void 0,margin:{left:68,top:56},pluginConfigManifest:void 0,configData:void 0,allActionsList:{show:"Show",hide:"Hide",play:"Play",pause:"Pause",stop:"Stop",link:"Link To"},playableActionsList:{play:"Play",pause:"Pause",stop:"Stop"},visibleActionsList:{show:"Show",hide:"Hide"},stageActionsList:{link:"Link To"},initialize:function(){var t=this;EkstepEditorAPI.addEventListener("object:selected",this.objectSelected,this),EkstepEditorAPI.addEventListener("object:unselected",this.objectUnselected,this),EkstepEditorAPI.addEventListener("config:show",this.refreshConfig,this),EkstepEditorAPI.addEventListener("stage:render:complete",this.stageSelect,this),EkstepEditorAPI.addEventListener("config:help",this.showHelp,this),EkstepEditorAPI.addEventListener("config:actions",this.showActions,this),EkstepEditorAPI.addEventListener("org.ekstep.config:colorpicker",this.showColorPicker,this),EkstepEditorAPI.addEventListener("org.ekstep.config:invoke",this.invoke,this),EkstepEditorAPI.addEventListener("org.ekstep.config:addAction",this.addAction,this),EkstepEditorAPI.addEventListener("org.ekstep.config:removeAction",this.removeAction,this),EkstepEditorAPI.addEventListener("org.ekstep.config:toggleStageEvent",this.toggleEventToStage,this),EkstepEditorAPI.addEventListener("config:customize",this.showCustomize,this),EkstepEditorAPI.addEventListener("config:properties",this.showProperties,this),EkstepEditorAPI.addEventListener("config:settings:show",this.showSettingsTab,this),EkstepEditorAPI.addEventListener("config:help:show",this.showHelpTab,this),EkstepEditorAPI.addEventListener("config:comments:show",this.showCommentsTab,this),EkstepEditorAPI.addEventListener("config:developer:show",this.showdeveloperTab,this);var e=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(e,function(){e.selectedConfigCategory="settings",e.selectedObjectForConfig="stage",e.selectedConfig="customize"}),e.$watch("configData",function(e,i){t.updateConfig(e,i)},!0),this.canvasOffset=$("#canvas").offset()},objectSelected:function(t,e){this.selectedPluginId=e.id;var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfigCategory="settings",i.selectedObjectForConfig="plugin"}),this.refreshConfig(t,e)},objectUnselected:function(t,e){if(this.selectedPluginId==e.id){var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfigCategory="settings",i.selectedObjectForConfig="stage"}),this.refreshConfig(t,e)}},stageSelect:function(t,e){var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedObjectForConfig="stage"}),this.refreshConfig(t,e)},refreshConfig:function(t,e){var i=EkstepEditorAPI.getAngularScope();switch(i.selectedConfigCategory){case"comments":this.showCommentsTab(t,e);break;case"help":this.showHelpTab(t,tab);break;default:this.showSettingsTab(t,e)}},showConfig:function(t,e){var i=this;this.pluginConfigManifest=EkstepEditorAPI._.clone(EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject().getConfigManifest():EkstepEditorAPI.getCurrentStage().getConfigManifest()),this.configData=EkstepEditorAPI._.clone(EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject().getConfig():EkstepEditorAPI.getCurrentStage().getConfig()),EkstepEditorAPI._.isUndefined(this.pluginConfigManifest)&&(this.pluginConfigManifest=[],EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject().renderConfig():EkstepEditorAPI.getCurrentStage().renderConfig());var o=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(o,function(){o.pluginConfig=i.pluginConfigManifest,o.configData=i.configData}),EkstepEditorAPI._.forEach(i.pluginConfigManifest,function(t){i._invoke(t,i.configData)})},_invoke:function(t,e){var i=this;if(e=e||{},"colorpicker"===t.dataType){var o={id:t.propertyName,callback:this.onConfigChange,color:e[t.propertyName]};setTimeout(function(){EkstepEditorAPI.dispatchEvent("colorpicker:state",o)},500)}"rangeslider"===t.dataType&&setTimeout(function(){EkstepEditorAPI.jQuery("#"+t.propertyName).on("change mouseclick",function(){EkstepEditorAPI.jQuery("#"+t.propertyName+"label").html(EkstepEditorAPI.jQuery(this).val()),i.onConfigChange(t.propertyName,EkstepEditorAPI.jQuery(this).val())})},500),"inputSelect"===t.dataType&&(_.indexOf(t.range,parseInt(i.configData[t.propertyName]))&&t.range.push(i.configData[t.propertyName]),setTimeout(function(){EkstepEditorAPI.jQuery("#"+t.propertyName).dropdown({allowAdditions:!0,className:{dropdown:"ui search dropdown"},action:function(e,o,n){isNaN(parseInt(e,10))||parseInt(e,10)<t.minValue||parseInt(e,10)>t.maxValue?(i.configData[t.propertyName]=t.defaultValue,i.onConfigChange(t.propertyName,t.defaultValue),EkstepEditorAPI.jQuery("#"+t.propertyName).parent().dropdown("set text",t.defaultValue)):(i.configData[t.propertyName]=parseInt(e),_.indexOf(t.range,parseInt(i.configData[t.propertyName]))&&t.range.push(i.configData[t.propertyName]),i.onConfigChange(t.propertyName,parseInt(e)),EkstepEditorAPI.jQuery("#"+t.propertyName).parent().dropdown("set text",parseInt(e)))}})},1e3))},updateConfig:function(t,e){var i=this,o=EkstepEditorAPI._.reduce(e,function(e,i,o){return EkstepEditorAPI._.isEqual(i,t[o])?e:e.concat(o)},[]);EkstepEditorAPI._.forEach(o,function(e){i.onConfigChange(e,t[e])})},onConfigChange:function(t,e){var i=EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject():EkstepEditorAPI.getCurrentStage();!EkstepEditorAPI._.isUndefined(e)&&i&&(i._onConfigChange(t,e),i.onConfigChange(t,e),"autoplay"===t&&this.toggleEventToStage("",{flag:e,id:i.id}))},showHelp:function(t,e){EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject().getHelp(function(t){EkstepEditorAPI.jQuery("#pluginHelpContent").html(micromarkdown.parse(t))}):EkstepEditorAPI.getCurrentStage().getHelp(function(t){EkstepEditorAPI.jQuery("#pluginHelpContent").html(micromarkdown.parse(t))})},showActions:function(t,e){var i=this,o=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(o,function(){o.currentObjectActions=[],o.allActionsList=i.allActionsList,o.selectedConfig="actions"}),this.highlightTargetObject(),this.updateActions(),this.updateTargetOptions(),this.restoreOnObjectSelect()},invoke:function(t,e){var i=this;if(e.type)switch(e.type){case"imagebrowser":EkstepEditorAPI.dispatchEvent("org.ekstep.assetbrowser:show",{type:"image",callback:function(t){i.onConfigChange("asset",t)}})}},addAction:function(t,e){e.command&&e.asset&&(this.stageActionsList[e.command]?EkstepEditorAPI.getCurrentObject().addEvent({type:"click",action:[{id:UUID(),type:"command",command:"transitionTo",asset:"theme",value:e.asset}]}):EkstepEditorAPI.getCurrentObject().addEvent({type:"click",action:[{id:UUID(),type:"command",command:e.command,asset:e.asset}]})),this.updateActions(),setTimeout(function(){EkstepEditorAPI.jQuery("#actionTargetDropdown").dropdown("restore defaults"),EkstepEditorAPI.jQuery("#actionTypeDropdown").dropdown("restore defaults")},500)},removeAction:function(t,e){e.index>-1&&(EkstepEditorAPI.getCurrentObject().event.splice(parseInt(e.index),1),this.updateActions())},updateActions:function(){var t=EkstepEditorAPI.getAngularScope(),e=EkstepEditorAPI.getCurrentObject().event,i=[];e&&e.length&&EkstepEditorAPI._.forEach(e,function(t){t.action&&t.action.length&&i.push(t.action[0])}),EkstepEditorAPI.ngSafeApply(t,function(){t.currentObjectActions=i})},highlightTargetObject:function(){var t=this;EkstepEditorAPI.jQuery("#actionTargetDropdown:not(.addClick)").parent().on("click",function(){EkstepEditorAPI.jQuery("#actionTargetDropdown").nextAll(".menu.transition").find(".item").mouseover(function(e){var i=EkstepEditorAPI.jQuery(e.target).text(),o=EkstepEditorAPI.getPluginInstance(i);if(o&&o.editorObj){var n=o.editorObj,s=t.canvasOffset.left+n.left-5,r=t.canvasOffset.top+n.top-5;EkstepEditorAPI.jQuery("#objectPointer").show().offset({left:s,top:r}).css({height:n.getHeight()+10,width:n.getWidth()+10})}}),EkstepEditorAPI.jQuery(this).mouseleave(function(){EkstepEditorAPI.jQuery("#objectPointer").hide()})}).addClass("addClick")},restoreOnObjectSelect:function(){setTimeout(function(){EkstepEditorAPI.jQuery("#actionTargetDropdown").dropdown("clear"),EkstepEditorAPI.jQuery("#actionTypeDropdown").dropdown("clear")},500)},updateTargetOptions:function(){var t=this,e=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.jQuery("#actionTypeDropdown:not(.addChange)").on("change",function(i){EkstepEditorAPI.ngSafeApply(e,function(){e.actionTargetObjects=[]});var o=EkstepEditorAPI.jQuery(this).val().split(":")[1];t.visibleActionsList[o]&&t.setVisibleObjects(),t.playableActionsList[o]&&t.setPlayableObjects(),t.stageActionsList[o]&&t.setStageObjects(),setTimeout(function(){EkstepEditorAPI.jQuery("#actionTargetDropdown").dropdown("clear")},500)}).addClass("addChange")},setVisibleObjects:function(){var t=EkstepEditorAPI.getAngularScope(),e=[],i=EkstepEditorAPI.getStagePluginInstances(EkstepEditorAPI.getCurrentStage().id,null,["org.ekstep.audio"],[EkstepEditorAPI.getCurrentObject().id]);EkstepEditorAPI._.forEach(i,function(t){e[t.id]=t.id}),EkstepEditorAPI.ngSafeApply(t,function(){t.actionTargetObjects=e})},setPlayableObjects:function(){var t=EkstepEditorAPI.getStagePluginInstances(EkstepEditorAPI.getCurrentStage().id,["org.ekstep.audio"],null,[EkstepEditorAPI.getCurrentObject().id]),e=[];EkstepEditorAPI._.forEach(t,function(t){if(t.media){var i=t.media[Object.keys(t.media)[0]];e[i.id]=i.id}});var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.actionTargetObjects=e})},setStageObjects:function(){var t=[];EkstepEditorAPI._.forEach(EkstepEditorAPI._.clone(EkstepEditorAPI.getAllStages(),!0),function(e,i){var o="Stage "+(i+1);t[e.id]=o}),delete t[EkstepEditorAPI.getCurrentStage().id];var e=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(e,function(){e.actionTargetObjects=t})},toggleEventToStage:function(t,e){var i=EkstepEditorAPI.getCurrentStage(),o=-1;i.event&&_.forEach(i.event,function(t,i){EkstepEditorAPI._.isArray(t.action)?t.action[0].asset===e.id&&(o=i):EkstepEditorAPI._.isObject(t.action)&&t.action.asset===e.id&&(o=i)}),e.flag===!0&&o===-1?i.addEvent({type:"enter",action:[{id:UUID(),type:"command",command:"play",asset:e.id}]}):e.flag===!1&&o!==-1&&i.event.splice(o,1)},showProperties:function(t,e){var i=EkstepEditorAPI.getAngularScope(),o=EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject().getProperties():EkstepEditorAPI.getCurrentStage().getProperties();EkstepEditorAPI.ngSafeApply(i,function(){i.pluginProperties=o,i.selectedConfig="properties"})},showCustomize:function(t,e){this.showConfig(t,e);var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfig="customize"})},showSettingsTab:function(t,e){var i=EkstepEditorAPI.getAngularScope();switch(i.selectedConfig){case"properties":this.showProperties(t,e);break;case"actions":this.showActions(t,e);break;default:this.showCustomize(t,e)}EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfigCategory="settings"})},showHelpTab:function(t,e){this.showHelp(t,e);var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfigCategory="help"})},showCommentsTab:function(t,e){var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfigCategory="comments"})},showdeveloperTab:function(t,e){var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.selectedConfigCategory="developer"}),EkstepEditorAPI.dispatchEvent("org.ekstep.developer:getPlugins")}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.stage","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Stage Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","help":{"src":"editor/help.md","dataType":"text"},"menu":[{"id":"stage","category":"main","type":"icon","toolTip":"Add Stage","title":"Stage","iconClass":"icon-newstage icon","submenu":[{"id":"beginning","type":"icon","title":"beginning","iconClass":"fast backward icon","onclick":{"id":"stage:create","data":{"position":"beginning"}}},{"id":"end","type":"icon","title":"end","iconClass":"fast forward icon","onclick":{"id":"stage:create","data":{"position":"end"}}},{"id":"front","type":"icon","title":"after current","iconClass":"forward icon","onclick":{"id":"stage:create","data":{"position":"afterCurrent"}}},{"id":"back","type":"icon","title":"before current","iconClass":"backward icon","onclick":{"id":"stage:create","data":{"position":"beforeCurrent"}}}]}],"configManifest":[{"propertyName":"genieControls","title":"Show Genie Controls","description":"Toggle genie controls","dataType":"boolean","required":true,"defaultValue":true},{"propertyName":"instructions","title":"Teacher Instructions","description":"Teacher Instructions","dataType":"textarea","required":true,"defaultValue":""}]}},eval('EkstepEditor.basePlugin.extend({type:"stage",thumbnail:void 0,onclick:void 0,currentObject:void 0,canvas:void 0,initialize:function(){EkstepEditorAPI.addEventListener("stage:create",this.createStage,this),EkstepEditorAPI.addEventListener("object:modified",this.modified,this),EkstepEditorAPI.addEventListener("stage:modified",this.modified,this),EkstepEditorAPI.addEventListener("object:selected",this.objectSelected,this),EkstepEditorAPI.addEventListener("object:removed",this.objectRemoved,this)},createStage:function(t,e){EkstepEditorAPI.instantiatePlugin(this.manifest.id,e)},newInstance:function(){this.onclick={id:"stage:select",data:{stageId:this.id}},this.ondelete={id:"stage:delete",data:{stageId:this.id}},this.duplicate={id:"stage:duplicate",data:{stageId:this.id}},EkstepEditorAPI.addStage(this),this.attributes={x:0,y:0,w:720,h:405,id:this.id},this.addConfig("instructions",this.getParam("instructions")||"")},getOnClick:function(){return{id:"stage:select",data:{stageId:this.id,prevStageId:EkstepEditorAPI.getCurrentStage().id}}},setCanvas:function(t){this.canvas=t},addChild:function(t){this.children.push(t),t.editorObj&&(this.canvas.add(t.editorObj),this.canvas.setActiveObject(t.editorObj),this.setThumbnail(),EkstepEditorAPI.dispatchEvent("stage:modified",{id:t.id})),this.enableSave()},setThumbnail:function(){this.thumbnail=this.canvas.toDataURL({format:"jpeg",quality:.1})},updateZIndex:function(){var t=this;EkstepEditorAPI._.forEach(this.children,function(e){e.editorObj?e.attributes["z-index"]=t.canvas.getObjects().indexOf(e.editorObj):e.attributes["z-index"]=t.canvas.getObjects().length})},render:function(t){EkstepEditor.stageManager.clearCanvas(t),this.children=EkstepEditorAPI._.sortBy(this.children,[function(t){return t.getAttribute("z-index")}]),EkstepEditorAPI._.forEach(this.children,function(e){e.render(t)}),t.renderAll(),EkstepEditorAPI.dispatchEvent("stage:render:complete",{stageId:this.id}),this.thumbnail=t.toDataURL({format:"jpeg",quality:.1}),EkstepEditorAPI.refreshStages()},modified:function(t,e){EkstepEditorAPI.getCurrentStage().updateZIndex(),EkstepEditorAPI.getCurrentStage().setThumbnail(),EkstepEditorAPI.refreshStages(),this.enableSave()},objectSelected:function(t,e){if(!EkstepEditorAPI._.isUndefined(this.currentObject)&&this.currentObject!==e.id){var i=EkstepEditorAPI.getPluginInstance(this.currentObject);EkstepEditorAPI.getCanvas().trigger("selection:cleared",{target:i.editorObj})}this.currentObject=e.id},objectRemoved:function(t,e){this.currentObject=void 0},destroyOnLoad:function(t,e,i){var n=this;t==n.children.length?(e.clear(),n.render(e),$("#"+n.id).remove(),i()):setTimeout(function(){n.destroyOnLoad(t,e,i)},1e3)},enableSave:function(){EkstepEditorAPI.getAngularScope().enableSave()},getConfigManifest:function(){return this.manifest.editor.configManifest},getConfig:function(){var t=this._super();return t.genieControls=EkstepEditorAPI.getAngularScope().showGenieControls,t},onConfigChange:function(t,e){switch(t){case"instructions":this.addParam("instructions",e);break;case"genieControls":if(e!==EkstepEditorAPI.getAngularScope().showGenieControls){var i=EkstepEditorAPI.getAngularScope();EkstepEditorAPI.ngSafeApply(i,function(){i.toggleGenieControl()})}}}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.text-1.0/editor/texteditor.js'>"))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.text","ver":"1.0","shortId":"org.ekstep.text","author":"Santhosh Vasabhaktula","title":"Text Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/texteditor.js"}],"menu":[{"id":"org.ekstep.text","category":"main","type":"icon","toolTip":"Add Text","title":"Text","iconClass":"icon-text icon","onclick":{"id":"org.ekstep.text:create","data":{"__text":"","x":10,"y":20,"fontFamily":"Sans-serif","fontSize":18,"minWidth":20,"w":35,"maxWidth":500,"fill":"#000000","fontStyle":"normal","fontWeight":"normal","stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1,"editable":false,"lineHeight":1.3}}}],"configManifest":[{"propertyName":"textType","title":"Text Enhancement","dataType":"featureButtonToggle","description":"Text Enhancement","options":[{"value":"readalong","title":"Readalong","description":"Readalong","state":true,"status":"HIDE","onclick":{"id":"org.ekstep.text:readalong:show"},"suboptions":[{"toolTip":"Delete","dataType":"icon","iconClass":"trash icon","onclick":{"id":"org.ekstep.text:delete:enhancement"}}]},{"value":"wordinfo","title":"Wordinfo","description":"Wordinfo","state":true,"status":"HIDE","onclick":{"id":"org.ekstep.text:wordinfo:show"},"suboptions":[{"toolTip":"Delete","dataType":"icon","iconClass":"trash icon","onclick":{"id":"org.ekstep.text:delete:enhancement"}}]}],"defaultValue":"text"},{"propertyName":"color","title":"Font color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"rgb(255,0,0)"},{"propertyName":"font","dataType":"group","description":"Choose fontweight and fontstyle","config":[{"propertyName":"fontweight","title":"Font Weight","toolTip":"Bold","description":"Select font size for the text","dataType":"icon","iconClass":"bold icon","required":true,"defaultValue":false},{"propertyName":"fontstyle","title":"Font Style","toolTip":"Italic","description":"Select font style for the text","dataType":"icon","iconClass":"italic icon","required":true,"defaultValue":false}]},{"propertyName":"align","title":"Align Text","dataType":"buttonToggle","description":"Select text alignment","options":[{"value":"left","title":"Text Align Left","toolTip":"Left","description":"Align text to left","dataType":"icon","iconClass":"align left icon"},{"value":"center","title":"Text Align Center","toolTip":"Center","description":"Align text to center","dataType":"icon","iconClass":"align center icon"},{"value":"right","title":"Text Align Right","toolTip":"Right","description":"Align text to right","dataType":"icon","iconClass":"align right icon"}],"defaultValue":"left"},{"propertyName":"fontfamily","title":"Font Family","description":"Select font family for the text","dataType":"select","range":["Arial","Courier","Georgia","Helvetica","Monospace","Sans-serif","Serif","Tahoma","Times","Trebuchet MS","Verdana","NotoSansKannada","NotoSansGujarati","NotoSansBengali","NotoSansGurmukhi","NotoSansOriya","NotoSansDevanagari","NotoSansTamil","NotoSansTelugu","NotoNastaliqUrdu","NotoSansMalayalam"],"required":true,"defaultValue":"Sans-serif"},{"propertyName":"fontsize","title":"Font Size","description":"Select font size for the text","dataType":"inputSelect","minValue":6,"maxValue":400,"range":[18,20,22,24,26,28,32,36,40,44,48,54,60,66,72,80,88,96],"required":true,"defaultValue":18}],"help":{"src":"editor/help.md","dataType":"text"},"init-data":{"__text":"","x":10,"y":20,"fontFamily":"Arial","fontSize":18,"minWidth":20,"w":35,"maxWidth":500,"fill":"#000000","fontStyle":"normal","fontWeight":"normal"}},"renderer":{"main":"renderer/plugin.js"}},eval('EkstepEditor.basePlugin.extend({type:"org.ekstep.text",magicNumber:1920,editorWidth:720,initialize:function(){EkstepEditorAPI.addEventListener("object:unselected",this.objectUnselected,this),EkstepEditorAPI.addEventListener("stage:unselect",this.stageUnselect,this),EkstepEditorAPI.addEventListener("org.ekstep.text:readalong:show",this.showReadalong,this),EkstepEditorAPI.addEventListener("org.ekstep.text:wordinfo:show",this.showWordInfo,this),EkstepEditorAPI.addEventListener("org.ekstep.text:delete:enhancement",this.deleteEnhancement,this),EkstepEditorAPI.getService("popup").loadNgModules(EkstepEditorAPI.getPluginRepo()+"/org.ekstep.text-1.0/editor/deleteConfirmationDialog.html")},newInstance:function(){var t=this.convertToFabric(this.attributes);if(delete t.__text,t.editable=!1,this.editorObj=new fabric.ITextbox(this.attributes.__text,t),""==this.attributes.__text&&textEditor.showEditor(this.id),EkstepEditorAPI._.isUndefined(this.attributes.timings)&&"readalong"!==this.attributes.textType)if(EkstepEditorAPI._.isUndefined(this.attributes.words)&&"wordinfo"!==this.attributes.textType)this.attributes.textType="text";else{var e={id:"popupTint",src:EkstepEditor.mediaManager.getMediaOriginURL("https://dev.ekstep.in/assets/public/content/PopupTint_1460636175572.png"),type:"image",assetId:"domain_38606"};this.addMedia(e),this.addWordinfoconfigManifest(this)}else{if(EkstepEditorAPI._.isUndefined(this.attributes.textType)){this.attributes.textType="readalong",this.config.text=this.attributes.__text,this.config.audio=this.attributes.audio,this.config.timings=this.attributes.timings,this.config.highlight=this.attributes.highlight,this.config.autoplay=this.attributes.autoplay;var i=EkstepEditorAPI.getMedia(this.attributes.audio);i.src=EkstepEditor.mediaManager.getMediaOriginURL(i.src),EkstepEditorAPI._.isUndefined(i.preload)&&(i.preload=!0),this.config.audioObj=i}this.addMedia(this.config.audioObj),this.manifest.editor.playable=!0,this.addReadalongconfigManifest(this)}},selected:function(t){fabric.util.addListener(fabric.document,"dblclick",this.dblClickHandler)},deselected:function(t,e,i){fabric.util.removeListener(fabric.document,"dblclick",this.dblClickHandler)},objectUnselected:function(t,e){fabric.util.removeListener(fabric.document,"dblclick",this.dblClickHandler)},dblClickHandler:function(t){var e=EkstepEditorAPI.jQuery("#canvas").offset().left+EkstepEditorAPI.getCurrentObject().editorObj.left,i=e+EkstepEditorAPI.getCurrentObject().editorObj.width,o=EkstepEditorAPI.jQuery("#canvas").offset().top+EkstepEditorAPI.getCurrentObject().editorObj.top,r=o+EkstepEditorAPI.getCurrentObject().editorObj.height;t.clientX>e&&t.clientX<i&&t.clientY>o&&t.clientY<r&&textEditor.showEditor(EkstepEditorAPI.getEditorObject().id),textEditor.generateTelemetry({type:"click",subtype:"doubleClick",target:"textEditor"})},stageUnselect:function(t){textEditor.hide()},getAttributes:function(){var t=EkstepEditorAPI._.omit(EkstepEditorAPI._.clone(this.attributes),["top","left","width","height","fontFamily","fontfamily","fontSize","fontstyle","fontweight","scaleX","scaleY"]);t.font=this.editorObj.get("fontFamily"),t.__text=this.editorObj.get("text"),t.fontsize=this.updateFontSize(this.editorObj.get("fontSize"),!1);var e=EkstepEditorAPI._.isUndefined(this.editorObj.get("fontWeight"))?"":"bold"===this.editorObj.get("fontWeight")?"bold":"",i=EkstepEditorAPI._.isUndefined(this.editorObj.get("fontStyle"))?"":"italic"===this.editorObj.get("fontStyle")?"italic":"";return t.weight=(e+" "+i).trim(),t},onConfigChange:function(t,e){switch(t){case"fontweight":this.editorObj.setFontWeight(e?"bold":"normal"),this.attributes.fontweight=e;break;case"fontstyle":this.editorObj.setFontStyle(e?"italic":"normal"),this.attributes.fontstyle=e;break;case"fontfamily":this.editorObj.setFontFamily(e),this.attributes.fontFamily=e,this.attributes.fontfamily=e;break;case"fontsize":this.editorObj.setFontSize(e),this.attributes.fontSize=e;break;case"color":this.editorObj.setFill(e),this.attributes.color=e;break;case"align":this.editorObj.setTextAlign(e),this.attributes.align=e;break;case"highlight":this.config.highlight=e;break;case"autoplay":this.config.autoplay=e;break;case"wordfontcolor":this.config.wordfontcolor=e;break;case"wordhighlightcolor":this.config.wordhighlightcolor=e;break;case"wordunderlinecolor":this.config.wordunderlinecolor=e}EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{target:EkstepEditorAPI.getEditorObject()})},getConfig:function(){var t=this._super();return t.color=this.attributes.color||this.attributes.fill,t.fontfamily=this.attributes.fontFamily,t.fontsize=this.attributes.fontSize,t.fontweight=this.attributes.fontweight||!1,t.fontstyle=this.attributes.fontstyle||!1,t.align=this.attributes.align||"left",t},getProperties:function(){var t=EkstepEditorAPI._.omitBy(EkstepEditorAPI._.clone(this.attributes),EkstepEditorAPI._.isObject);return t=EkstepEditorAPI._.omitBy(t,EkstepEditorAPI._.isNaN),delete t.__text,t.text=this.editorObj.text,this.pixelToPercent(t),t},updateFontSize:function(t,e){var i=void 0;if(e){var o=this.attributes.w*(this.magicNumber/100),r=this.editorWidth*this.attributes.w/100;i=parseInt(Math.round(t*(r/o)).toString())}else{var o=this.editorObj.width/this.magicNumber*100,r=this.editorObj.width/this.editorWidth*100,n=t*(this.editorObj.scaleX||1);i=parseFloat((n*(r/o)).toFixed(2))}return i},convertToFabric:function(t){var e=EkstepEditorAPI._.clone(t);if(t.x&&(e.left=t.x),t.y&&(e.top=t.y),t.w&&(e.width=t.w),t.h&&(e.height=t.h),t.radius&&(e.rx=t.radius),t.color&&(e.fill=t.color),t.weight&&EkstepEditorAPI._.includes(t.weight,"bold")?(e.fontWeight="bold",t.fontweight=!0):t.fontweight=!1,t.weight&&EkstepEditorAPI._.includes(t.weight,"italic")?(e.fontStyle="italic",t.fontstyle=!0):t.fontstyle=!1,t.font&&(e.fontFamily=t.font,t.fontFamily=t.font),t.fontsize){var i=this.updateFontSize(t.fontsize,!0);e.fontSize=i,t.fontSize=i}return t.align&&(e.textAlign=t.align,e.align=t.align),delete e.lineHeight,e},getConfigManifest:function(){var t=this._super();return EkstepEditorAPI._.remove(t,function(t){return"stroke"===t.propertyName}),t},showReadalong:function(){var t=this,e=EkstepEditorAPI.getCurrentObject();EkstepEditorAPI.dispatchEvent("org.ekstep.htext:showpopup",{textObj:e,callback:function(i){if(!EkstepEditorAPI._.isUndefined(i)){e.attributes.__text=e.editorObj.text=i.text,e.config.audio=i.audio,e.config.timings=i.timings,e.config.highlight=i.highlight,e.config.audioObj=i.audioObj,e.config.autoplay=i.autoplay,e.attributes.autoplay=i.autoplay,e.attributes.textType="readalong",e.manifest.editor.playable=!0;var o=i.audioObj;EkstepEditorAPI._.isUndefined(o)||(o.src=EkstepEditor.mediaManager.getMediaOriginURL(o.src)),e.addMedia(o),t.addReadalongconfigManifest(e),EkstepEditorAPI.dispatchEvent("config:show"),EkstepEditorAPI.render()}}})},showWordInfo:function(){var t=this,e=EkstepEditorAPI.getCurrentObject();EkstepEditorAPI.dispatchEvent("org.ekstep.wordinfotext:showpopup",{textObj:e,callback:function(i,o){if(!EkstepEditorAPI._.isUndefined(i)){e.data=o,e.attributes.__text=e.editorObj.text=i.text,e.config.words=i.words,e.config.wordfontcolor=i.wordfontcolor,e.config.wordhighlightcolor=i.wordhighlightcolor,e.config.wordunderlinecolor=i.wordunderlinecolor,e.attributes.textType="wordinfo";var r={id:"popupTint",src:EkstepEditor.mediaManager.getMediaOriginURL("https://dev.ekstep.in/assets/public/content/PopupTint_1460636175572.png"),type:"image",assetId:"domain_38606"};r.src=EkstepEditor.mediaManager.getMediaOriginURL(r.src),e.addMedia(r),t.addWordinfoconfigManifest(e),EkstepEditorAPI.dispatchEvent("config:show"),EkstepEditorAPI.render()}}})},deleteEnhancement:function(){EkstepEditorAPI.getService("popup").open({template:"deleteConfirmationDialog",controller:["$scope",function(t){t.warningMessage="readalong"==EkstepEditorAPI.getCurrentObject().attributes.textType?"Readalong":"Wordinfo",t.delete=function(){t.closeThisDialog();var e=EkstepEditorAPI.getCurrentObject();if("readalong"==e.attributes.textType){e.manifest.editor.playable=!1,EkstepEditorAPI._.reject(e.manifest.editor.configManifest,{propertyName:"highlight"});var i=e.manifest.editor.configManifest[EkstepEditorAPI._.findIndex(e.manifest.editor.configManifest,function(t,e){return"textType"==t.propertyName})];i.options[0].status="HIDE",i.options[1].state=!0,delete e.config.audio,delete e.config.timings,delete e.config.highlight,delete e.config.audioObj,delete e.config.autoplay,delete e.attributes.autoplay}else{EkstepEditorAPI._.reject(e.manifest.editor.configManifest,{propertyName:"wordfontcolor"}),EkstepEditorAPI._.reject(e.manifest.editor.configManifest,{propertyName:"wordhighlightcolor"}),EkstepEditorAPI._.reject(e.manifest.editor.configManifest,{propertyName:"wordunderlinecolor"});var i=e.manifest.editor.configManifest[EkstepEditorAPI._.findIndex(e.manifest.editor.configManifest,function(t,e){return"textType"==t.propertyName})];i.options[1].status="HIDE",i.options[0].state=!0,delete e.data,delete e.config.words,delete e.config.wordfontcolor,delete e.config.wordhighlightcolor,delete e.config.wordunderlinecolor}e.attributes.textType="text",EkstepEditorAPI.dispatchEvent("config:show"),EkstepEditorAPI.render()}}],showClose:!1},function(){})},addReadalongconfigManifest:function(t){t.manifest.editor.configManifest.push({propertyName:"highlight",title:"Highlight Color",description:"Choose a color from the color picker to highlight the text",dataType:"colorpicker",required:!0,defaultValue:"#FFFF00"});var e=t.manifest.editor.configManifest[EkstepEditorAPI._.findIndex(t.manifest.editor.configManifest,function(t,e){return"textType"==t.propertyName})];e.options[0].status="SHOW",e.options[1].state=!1},addWordinfoconfigManifest:function(t){t.manifest.editor.configManifest.push({propertyName:"wordfontcolor",title:"Word Font Color",description:"Choose a color from the color picker to highlight the font color of selected word",dataType:"colorpicker",required:!0,defaultValue:"#0000FF"},{propertyName:"wordhighlightcolor",title:"Word Highlight Color",description:"Choose a color from the color picker to highlight the selected word",dataType:"colorpicker",required:!0,defaultValue:"#FFFF00"},{propertyName:"wordunderlinecolor",title:"Word Underline Color",description:"Choose a color from the color picker to underline the selected word",dataType:"colorpicker",required:!0,defaultValue:"#0000FF"});var e=t.manifest.editor.configManifest[EkstepEditorAPI._.findIndex(t.manifest.editor.configManifest,function(t,e){return"textType"==t.propertyName})];e.options[1].status="SHOW",e.options[0].state=!1}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.shape","ver":"1.0","shortId":"shape","author":"Santhosh Vasabhaktula","title":"Shape Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[],"menu":[{"id":"shape","category":"main","type":"icon","toolTip":"Add Shapes","title":"Shapes","iconClass":"icon-shape icon","submenu":[{"id":"rectangle","type":"icon","toolTip":"Add Rectangle","title":"Rectangle","iconClass":"icon-rectangle icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"rect","x":10,"y":20,"fill":"#FFFF00","w":14,"h":25,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"circle","type":"icon","toolTip":"Add Circle","title":"Circle","iconClass":"icon-circle icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"ellipse","x":15,"y":15,"fill":"#00FF00","w":18,"h":32,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"rounded-rectangle","type":"icon","toolTip":"Add Rounded Rectangle","title":"Rounded Rectangle","iconClass":"icon-roundedrect icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"roundrect","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"radius":10,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"star","type":"icon","toolTip":"Add Star","title":"Star","iconClass":"star icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"star","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"corners":5,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"polygon","type":"icon","toolTip":"Add Polygon","title":"Polygon","iconClass":"first order icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"polygon","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"sides":5,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}},{"id":"trapezium","type":"icon","toolTip":"Add Trapezium","title":"Trapezium","iconClass":"road icon","onclick":{"id":"org.ekstep.shape:create","data":{"type":"trapezium","x":20,"y":20,"fill":"#FF0000","w":14,"h":25,"sides":5,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":1}}}]}],"configManifest":[{"propertyName":"color","title":"Fill Color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"#000000"}],"help":{"src":"editor/help.md","dataType":"text"},"init-data":{"type":"rect","x":10,"y":20,"fill":"#FFFF00","w":14,"h":25}}},eval('EkstepEditor.basePlugin.extend({type:"shape",initialize:function(){},newInstance:function(){var t=this.convertToFabric(this.attributes);switch(this.attributes.type){case"ellipse":t.rx=t.w/2,t.ry=t.h/2,this.editorObj=new fabric.Ellipse(t);break;case"roundrect":this.manifest.editor.configManifest.push({propertyName:"radius",title:"Radius",placeholder:"Radius",description:"Input radius for the rounded rectangle",dataType:"input",valueType:"number",required:!1,defaultValue:10,minimumValue:0}),this.editorObj=new fabric.Rect(t);break;case"rect":this.editorObj=new fabric.Rect(t);break;case"star":this.manifest.editor.configManifest.push({propertyName:"corners",title:"Corners",placeholder:"Corners",description:"No of corners for the star",dataType:"rangeslider",valueType:"number",required:!1,defaultValue:5,minimumValue:4,maximumValue:10});var e=t.corners,y=e+"star";this.drawShape(y,t);break;case"polygon":this.manifest.editor.configManifest.push({propertyName:"sides",title:"Sides",placeholder:"Sides",description:"No of sides for the shape",dataType:"rangeslider",valueType:"number",required:!1,defaultValue:5,minimumValue:4,maximumValue:10});var i=t.sides,y=i+"polygon";this.drawShape(y,t);break;case"trapezium":var y="trapezium";this.drawShape(y,t)}this.editorObj&&this.editorObj.setFill(t.fill)},onConfigChange:function(t,e){switch(t){case"color":this.editorObj.setFill(e),this.attributes.fill=e;break;case"radius":"ellipse"==this.attributes.type&&(this.editorObj.set({w:2*e}),this.editorObj.set({h:2*e}),this.attributes.w=2*e,this.attributes.h=2*e),this.editorObj.set({rx:e}),this.editorObj.set({ry:e}),this.attributes.radius=e;break;case"sides":var y=e,i=y+"polygon",s=this.shapes[i];this.attributes.sides=y,this.editorObj.set({points:s});break;case"corners":var x=e,i=x+"star",s=this.shapes[i];this.attributes.corners=x,this.editorObj.set({points:s})}EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{target:EkstepEditorAPI.getEditorObject()})},getConfig:function(){var t=this._super();return t.color=this.attributes.fill,"roundrect"==this.attributes.type&&(t.radius=this.editorObj.rx),"ellipse"==this.attributes.type&&(t.radius=this.editorObj.rx),this.attributes.corners&&(t.corners=this.attributes.corners),this.attributes.sides&&(t.sides=this.attributes.sides),this.config.points=this.editorObj.get("points"),t},drawShape:function(t,e){var y=this.shapes[t];e.strokeLineJoin="bevil",this.editorObj=new fabric.Polygon(y,e,!1)},shapes:{"4star":[{x:100,y:50},{x:62.7,y:62.7},{x:50,y:100},{x:37.3,y:62.7},{x:0,y:50},{x:37.3,y:37.3},{x:50,y:0},{x:62.7,y:37.3}],"5star":[{x:50,y:0},{x:60.9,y:35},{x:100,y:35},{x:67.6,y:60},{x:79.4,y:100},{x:50,y:72},{x:20.6,y:100},{x:32.4,y:60},{x:0,y:35},{x:39.1,y:35}],"6star":[{x:50,y:100},{x:35,y:76},{x:0,y:75},{x:20,y:50},{x:0,y:25},{x:35,y:24},{x:50,y:0},{x:65,y:24},{x:100,y:25},{x:80,y:50},{x:100,y:75},{x:65,y:76}],"7star":[{x:100,y:59.8},{x:74,y:68},{x:72.9,y:100},{x:50.8,y:80},{x:29.6,y:100},{x:27.1,y:69.4},{x:0,y:62.5},{x:20.6,y:44.1},{x:10,y:19.9},{x:36.2,y:23.3},{x:48.6,y:0},{x:62.3,y:22.6},{x:88.2,y:17.7},{x:79,y:42.5}],"8star":[{x:100,y:50},{x:82.3,y:63.4},{x:85.4,y:85.4},{x:63.4,y:82.3},{x:50,y:100},{x:36.6,y:82.3},{x:14.6,y:85.4},{x:17.7,y:63.4},{x:0,y:50},{x:17.7,y:36.6},{x:14.6,y:14.6},{x:36.6,y:17.7},{x:50,y:0},{x:63.4,y:17.7},{x:85.4,y:14.6},{x:82.3,y:36.6}],"9star":[{x:100,y:40.2},{x:84.6,y:55.3},{x:93.8,y:74},{x:73.1,y:76.3},{x:68.1,y:100},{x:50.8,y:85},{x:33.9,y:100},{x:28.1,y:77.3},{x:7.3,y:75.9},{x:15.7,y:56.8},{x:0,y:42.4},{x:19.3,y:33.2},{x:17,y:12.4},{x:37.3,y:17.4},{x:48.9,y:0},{x:61.3,y:16.9},{x:81.3,y:11},{x:79.9,y:31.8}],"10star":[{x:100,y:65.5},{x:78.3,y:70.6},{x:79.4,y:90.5},{x:60.8,y:83.3},{x:50,y:100},{x:39.2,y:83.3},{x:20.6,y:90.5},{x:21.7,y:70.6},{x:0,y:65.5},{x:15,y:50},{x:0,y:34.5},{x:21.7,y:29.4},{x:20.6,y:9.5},{x:39.2,y:16.7},{x:50,y:0},{x:60.8,y:16.7},{x:79.4,y:9.5},{x:78.3,y:29.4},{x:100,y:34.5},{x:85,y:50}],"3polygon":[{x:50,y:0},{x:100,y:100},{x:0,y:100}],"4polygon":[{x:50,y:0},{x:100,y:50},{x:50,y:100},{x:0,y:50}],"5polygon":[{x:50,y:0},{x:100,y:34.5},{x:79.4,y:100},{x:20.6,y:100},{x:0,y:34.5}],"6polygon":[{x:100,y:50},{x:75,y:100},{x:25,y:100},{x:0,y:50},{x:25,y:0},{x:75,y:0}],"7polygon":[{x:50,y:0},{x:89.1,y:18.8},{x:100,y:61.1},{x:71.7,y:100},{x:28.3,y:100},{x:0,y:61.1},{x:10.9,y:18.8}],"8polygon":[{x:100,y:69.1},{x:69.1,y:100},{x:30.9,y:100},{x:0,y:69.1},{x:0,y:30.9},{x:30.9,y:0},{x:69.1,y:0},{x:100,y:30.9}],"9polygon":[{x:50,y:0},{x:82.1,y:11.7},{x:100,y:41.3},{x:93.3,y:75},{x:67.1,y:100},{x:32.9,y:100},{x:6.7,y:75},{x:0,y:41.3},{x:17.9,y:11.7}],"10polygon":[{x:100,y:50},{x:90.5,y:79.4},{x:65.5,y:100},{x:34.5,y:100},{x:9.5,y:79.4},{x:0,y:50},{x:9.5,y:20.6},{x:34.5,y:0},{x:65.5,y:0},{x:90.5,y:20.6}],trapezium:[{x:25,y:0},{x:75,y:0},{x:100,y:100},{x:0,y:100}]}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.image","ver":"1.0","shortId":"image","author":"Santhosh Vasabhaktula","title":"Image Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","help":{"src":"editor/help.md","dataType":"text"},"dependencies":[{"type":"plugin","plugin":"org.ekstep.assetbrowser","ver":"1.0"}],"menu":[{"id":"image","category":"main","type":"icon","toolTip":"Add Image","title":"Image","iconClass":"icon-media icon","onclick":{"id":"org.ekstep.image:assetbrowser:open"}}],"configManifest":[{"propertyName":"imageBrowser","title":"Image Browser","description":"Choose a  from the browser","dataType":"imagebrowser","required":true}]}},eval('EkstepEditor.basePlugin.extend({initialize:function(){var t=this;EkstepEditorAPI.addEventListener(t.manifest.id+":assetbrowser:open",this.openBrowser,this)},newInstance:function(){var t=this,e=this.parent;this.parent=void 0;var i=this.convertToFabric(this.attributes);"plugin"==this.attributes.from&&(delete i.width,delete i.height);var s=this.media?this.media[this.attributes.asset]:void 0;if(s&&s.src){s.src=EkstepEditor.mediaManager.getMediaOriginURL(s.src);var r=EkstepEditorAPI.globalContext.useProxyForURL?"image/get/"+encodeURIComponent(s.src):s.src;fabric.Image.fromURL(r,function(s){t.editorObj=s,t.parent=e,"plugin"==t.attributes.from&&(t.editorObj.scaleToWidth(i.w),delete t.attributes.from),t.postInit()},i)}},openBrowser:function(){var t=this;EkstepEditorAPI.dispatchEvent("org.ekstep.assetbrowser:show",{type:"image",search_filter:{},callback:function(e){e.x=20,e.y=20,e.w=50,e.h=50,e.from="plugin",EkstepEditorAPI.dispatchEvent(t.manifest.id+":create",e)}})},getCopy:function(){var t=this._super();return t.assetMedia=this.media[this.attributes.asset],t},onConfigChange:function(t,e){switch(t){case"asset":EkstepEditorAPI.dispatchEvent("delete:invoke"),EkstepEditorAPI.dispatchEvent(this.manifest.id+":create",e)}}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.audio-1.0/editor/libs/jquery.jplayer.min.js'>"))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.audio","ver":"1.0","shortId":"audio","author":"Amol Ghatol","title":"Audio Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/libs/jquery.jplayer.min.js"},{"type":"plugin","plugin":"org.ekstep.assetbrowser","ver":"1.0"}],"menu":[{"id":"audio","category":"main","type":"icon","toolTip":"Add Audio","title":"Audio","iconClass":"icon-audio icon","onclick":{"id":"org.ekstep.audio:assetbrowser:open"}}],"config":[{"propertyName":"aduioBrowser","title":"Audio Browser","description":"Choose a  from the browser","dataType":"audiobrowser","required":true}],"playable":true}},eval('EkstepEditor.basePlugin.extend({audioData:void 0,name:void 0,initialize:function(){var t=this;EkstepEditorAPI.addEventListener(t.manifest.id+":assetbrowser:open",this.openBrowser,this),EkstepEditorAPI.addEventListener(t.manifest.id+":removeAudio",this.removeAudio,this),EkstepEditorAPI.addEventListener(t.manifest.id+":toggleAudio",this.toggleAudio,this),EkstepEditorAPI.addEventListener(t.manifest.id+":jplayerInit",this.jplayerInit,this)},newInstance:function(){var t=this,e=this.media?this.media[this.attributes.asset]:void 0;e&&e.src?(e.src=EkstepEditor.mediaManager.getMediaOriginURL(e.src),EkstepEditor.mediaManager.addMedia(e),this.audioData={stageId:EkstepEditorAPI.getCurrentStage().id,type:"audio",title:EkstepEditorAPI._.isUndefined(e.name)?e.id:e.name,assetId:e.id,id:t.id,url:e.src},this.name=this.audioData.title,EkstepEditorAPI.dispatchEvent("org.ekstep.stageconfig:addcomponent",this.audioData)):this.parent=void 0},openBrowser:function(){var t=this;EkstepEditorAPI.dispatchEvent("org.ekstep.assetbrowser:show",{type:"audio",search_filter:{},callback:function(e){EkstepEditorAPI.dispatchEvent(t.manifest.id+":create",e)}})},getCopy:function(){var t=this._super();return t.assetMedia=this.media[this.attributes.asset],t},onConfigChange:function(t,e){EkstepEditorAPI.dispatchEvent("delete:invoke"),EkstepEditorAPI.dispatchEvent(this.manifest.id+":create",e)},render:function(t){},removeAudio:function(t,e){var i=EkstepEditorAPI.getPluginInstance(e.id);i.remove(),EkstepEditorAPI.dispatchEvent("org.ekstep.stageconfig:remove",e)},toggleAudio:function(t,e){var i=EkstepEditorAPI.getAllPluginInstanceByTypes();EkstepEditorAPI._.forEach(i,function(t,i){!EkstepEditorAPI._.isUndefined(t.media)&&t.media[e.asset]&&EkstepEditorAPI.dispatchEvent("org.ekstep.config:toggleStageEvent",{flag:e.autoplay,id:e.asset})})},jplayerInit:function(t,e){var i=e.id;EkstepEditorAPI.jQuery("#"+i).jPlayer({swfPath:"js/jplayer/",supplied:"mp3",solution:"html, flash",preload:"auto",wmode:"window",ready:function(){EkstepEditorAPI.jQuery(this).jPlayer("setMedia",{mp3:e.url}).jPlayer("play")},play:function(){EkstepEditorAPI.jQuery(this).addClass("pause")},pause:function(){EkstepEditorAPI.jQuery(this).removeClass("pause")},stop:function(){EkstepEditorAPI.jQuery(this).removeClass("pause")}}),EkstepEditorAPI.jQuery("#"+i).hasClass("pause")?EkstepEditorAPI.jQuery("#"+i).jPlayer("pause"):EkstepEditorAPI.jQuery("#"+i).jPlayer("play")}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.hotspot","ver":"1.0","shortId":"hotspot","author":"Santhosh Vasabhaktula","title":"Hotspot Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[],"menu":[{"id":"hotspot","category":"main","type":"icon","toolTip":"Add Hotspot","title":"Hotspot","iconClass":"icon-hotspot icon","onclick":{"id":"org.ekstep.hotspot:create","data":{"type":"roundrect","y":20,"x":20,"fill":"rgb(255,0,0)","w":15,"h":25,"opacity":0.4,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1}}}],"configManifest":[{"propertyName":"color","title":"Fill color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"rgb(255,0,0)"}],"help":{"src":"editor/help.md","dataType":"text"}},"initdata":{"props":{"y":20,"x":20}}},eval('EkstepEditor.basePlugin.extend({type:"hotspot",initialize:function(){},newInstance:function(){this.attributes.opacity=EkstepEditorAPI._.isUndefined(this.attributes.opacity)?.4:this.attributes.opacity;var t=this.convertToFabric(this.attributes);"roundrect"===this.attributes.type&&(this.editorObj=new fabric.Rect(t))},onRemove:function(t){},updateAttributes:function(){var t=this,i={"stroke-width":"stroke-width",scaleX:"scaleX",scaleY:"scaleY"};this&&(EkstepEditorAPI._.forEach(i,function(i,e){t.attributes[e]=t.editorObj.get(i)}),this.attributes.radius=this.editorObj.rx)},onConfigChange:function(t,i){"color"===t&&(this.editorObj.setFill(i),this.attributes.fill=i),EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{target:EkstepEditorAPI.getEditorObject()})},getConfig:function(){var t=this._super();return t.opacity=100*this.attributes.opacity,t.color=this.attributes.fill,t}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.scribblepad","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Scribblepad Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[],"menu":[{"id":"scribblepad","category":"main","type":"icon","toolTip":"Add Scribblepad","title":"scribblepad","iconClass":"icon-scribble icon","onclick":{"id":"org.ekstep.scribblepad:create","data":{"type":"roundrect","y":20,"x":25,"fill":"#3399FF","w":27,"h":60,"stroke":"rgba(255, 255, 255, 0)","strokeWidth":1,"opacity":0.3}},"media":[{"id":"eraserImage","src":"assets/EraserImage.png","type":"image"}]}],"configManifest":[{"propertyName":"color","title":"Fill color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"#3399FF"}],"help":{"src":"editor/help.md","dataType":"text"}},"renderer":{"main":"renderer/scribblepadplugin.js"}},eval('EkstepEditor.basePlugin.extend({type:"org.ekstep.scribblepad",initialize:function(){},newInstance:function(){var t=this.convertToFabric(this.attributes),e=EkstepEditorAPI.globalContext.useProxyForURL?EkstepEditor.config.baseURL:EkstepEditor.config.absURL;t.stroke=1,t.strokeWidth=2,t.strokeDashArray=[5,5],t.fill=this.attributes.fill,"roundrect"===this.attributes.type&&(this.editorObj=new fabric.Rect(t),this.addMedia({id:"org.ekstep.scribblepad.eraser",src:e+"/assets/public/content/1460624453530trash.png",assetId:"org.ekstep.scribblepad.eraser",type:"image",preload:!0}))},updateAttributes:function(){var t=this,e={radius:"radius",opacity:"opacity",stroke:"stroke","stroke-width":"stroke-width",scaleX:"scaleX",scaleY:"scaleY"};t&&EkstepEditorAPI._.forEach(e,function(e,i){t.attributes[i]=t.editorObj.get(e)})},onConfigChange:function(t,e){"color"===t&&(this.editorObj.setFill(e),this.attributes.fill=e),EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{target:EkstepEditorAPI.getEditorObject()})},getAttributes:function(){var t=this._super();return delete t.strokeDashArray,t["stroke-width"]=1,t.opacity=.3,t.stroke="#663300",t.thickness=2,t["z-index"]=999,t},getConfig:function(){var t=this._super();return t.color=this.attributes.fill,t}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.htext-1.0/editor/libs/karaoke.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.htext-1.0/editor/libs/jquery.scrollTo.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.htext-1.0/editor/libs/jquery.jplayer.min.js'>"))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.htext-1.0/editor/css/jquery-ui.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.htext","ver":"1.0","shortId":"htext","author":"Kartheek Palla","title":"Read-along Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","help":{"src":"editor/help.md","dataType":"text"},"dependencies":[{"type":"js","src":"editor/libs/karaoke.js"},{"type":"js","src":"editor/libs/jquery.scrollTo.js"},{"type":"js","src":"editor/libs/jquery.jplayer.min.js"},{"type":"css","src":"editor/css/jquery-ui.css"}],"configManifest":[{"propertyName":"highlight","title":"Highlight Color","description":"Choose a color from the color picker to highlight the text","dataType":"colorpicker","required":true,"defaultValue":"#FFFF00"},{"propertyName":"color","title":"Font color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"rgb(255,0,0)"},{"propertyName":"font","dataType":"group","description":"Choose fontweight and fontstyle","config":[{"propertyName":"fontweight","title":"Font Weight","toolTip":"Bold","description":"Select font size for the text","dataType":"icon","iconClass":"bold icon","required":true,"defaultValue":false},{"propertyName":"fontstyle","title":"Font Style","toolTip":"Italic","description":"Select font style for the text","dataType":"icon","iconClass":"italic icon","required":true,"defaultValue":false}]},{"propertyName":"fontfamily","title":"Font Family","description":"Select font family for the text","dataType":"select","range":["Arial","Courier","Georgia","Helvetica","Monospace","Sans-serif","Serif","Tahoma","Times","Trebuchet MS","Verdana","NotoSansKannada","NotoSansGujarati","NotoSansBengali","NotoSansGurmukhi","NotoSansOriya","NotoSansDevanagari","NotoSansTamil","NotoSansTelugu","NotoNastaliqUrdu","NotoSansMalayalam"],"required":true,"defaultValue":"Sans-serif"},{"propertyName":"fontsize","title":"Font Size","description":"Select font size for the text","dataType":"select","range":[18,20,22,24,26,28,32,36,40,44,48,54,60,66,72,80,88,96],"required":true,"defaultValue":18}],"playable":true}},eval('EkstepEditor.basePlugin.extend({type:"htext",magicNumber:1920,editorWidth:720,currentInstance:void 0,cb:void 0,text:void 0,initialize:function(){EkstepEditorAPI.addEventListener("object:unselected",this.objectUnselected,this),EkstepEditorAPI.addEventListener("delete:invoked",this.deleteObject,this),EkstepEditorAPI.addEventListener("org.ekstep.htext:showpopup",this.loadHtml,this),setTimeout(function(){var t=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.htext-1.0/editor/htext.html",e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.htext-1.0/editor/readalongapp.js";EkstepEditorAPI.getService("popup").loadNgModules(t,e)},1e3)},loadHtml:function(t,e){currentInstance=this,this.cb=e.callback,this.attributes=e.textObj.attributes,this.attributes.__text=e.textObj.editorObj.text,this.config=e.textObj.config,"readalong"==e.textObj.attributes.textType&&(this.editorObj=e.textObj.editorObj),EkstepEditorAPI.getService("popup").open({template:"htext",controller:"readalongcontroller",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},width:900,showClose:!1,className:"ngdialog-theme-plain"},function(){EkstepEditorAPI._.isUndefined(currentInstance.editorObj)||currentInstance.editorObj.text||(currentInstance.editorObj.remove(),EkstepEditorAPI.render())})},invokeKaraoke:function(t,e){var i=new Karaoke;if(i.audioObj.url=t,e){var r=EkstepEditorAPI._.isEmpty(e.config.timings)?"":EkstepEditorAPI._.split(e.config.timings,","),o=[],d=[],s=EkstepEditorAPI._.split(e.attributes.__text," "),n=0;EkstepEditorAPI._.each(r,function(t,e){n+=1,d.push({word:s[e],stepNo:10*parseFloat(t/1e3).toFixed(1),wordIdx:n}),o.push(parseFloat(t/1e3).toFixed(1))}),i.audioObj.url=t,i.audioObj.wordMap=d,i.audioObj.wordTimes=o,i.audioObj.highlightColor=e.config.highlight}else i.audioObj.url=t,i.audioObj.wordMap="",i.audioObj.wordTimes="",i.audioObj.highlightColor="",EkstepEditorAPI.jQuery("#jplayerSync").data("jPlayer","");return EkstepEditorAPI.jQuery("#syncSlider").bind("click",EkstepEditorAPI.jQuery.proxy(i.changePlaybackRate,i)),EkstepEditorAPI.jQuery("#changeaudio").bind("click",EkstepEditorAPI.jQuery.proxy(i.res,i)),EkstepEditorAPI.jQuery("#syncStart").bind("click",EkstepEditorAPI.jQuery.proxy(i.startSync,i)),EkstepEditorAPI.jQuery("#pick-hcolor").bind("click",EkstepEditorAPI.jQuery.proxy(i.setColor,i)),EkstepEditorAPI.jQuery("#stopAudio").bind("click",EkstepEditorAPI.jQuery.proxy(i.stopAudio,i)),EkstepEditorAPI.jQuery(".slideStep").bind("drop",EkstepEditorAPI.jQuery.proxy(i.handleWordDrop,i)),EkstepEditorAPI.jQuery("#syncMark").bind("click",EkstepEditorAPI.jQuery.proxy(i.markWords,i)),EkstepEditorAPI.jQuery("#sync-play").bind("click",EkstepEditorAPI.jQuery.proxy(i.playSyncedLayer,i)),EkstepEditorAPI.jQuery("#sync-pause").bind("click",EkstepEditorAPI.jQuery.proxy(i.pauseAudio,i)),window.karaoke=i,i.initPlayer(),i}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.quiz","ver":"1.0","author":"Manju dr","title":"Question Set Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","help":{"src":"editor/help.md","dataType":"text"},"dependencies":[{"type":"plugin","plugin":"org.ekstep.assessmentbrowser","ver":"1.0"}],"menu":[{"id":"assessment","category":"main","type":"icon","toolTip":"Add Question Set","title":"Question Set","iconClass":"icon-questions icon","onclick":{"id":"org.ekstep.quiz:showPopup"}}],"configManifest":[{"propertyName":"assessmentbrowser","title":"assessment Browser","description":"Choose a  from the browser","dataType":"assessmentbrowser","required":true},{"propertyName":"title","title":"Assessment Title","description":"Assessment Title","dataType":"input","valueType":"text","required":true},{"propertyName":"shuffle","title":"Shuffle Questions","description":"Shuffle of the Questions","dataType":"boolean","required":true},{"propertyName":"optionShuffle","title":"Shuffle Options","description":"Shuffle the options","dataType":"boolean","required":true},{"propertyName":"showImmediateFeedback","title":"Show Immediate Feedback","description":"Show the feedback popup","dataType":"boolean","required":true},{"propertyName":"total_items","title":"Display","description":"Toal marks to display","dataType":"input","valueType":"number","required":true},{"propertyName":"max_score","title":"Total Marks","description":"Toal marks to display","dataType":"input","valueType":"number","required":true}]},"renderer":{"main":"renderer/plugin.js"}},eval('EkstepEditor.basePlugin.extend({type:"org.ekstep.quiz",initialize:function(){EkstepEditorAPI.addEventListener(this.manifest.id+":showPopup",this.openAssessmentBrowser,this),EkstepEditorAPI.addEventListener(this.manifest.id+":renderQuiz",this.renderQuiz,this)},mediaObj:{},hasTemplateMedia:!0,newInstance:function(){var e=this;delete e.configManifest,e.attributes.w=80,e.attributes.h=85,e.attributes.x=9,e.attributes.y=6,e.addMediaFromConfig(),e.percentToPixel(e.attributes);var t=e.data.questionnaire;e.data.questionnaire.optionShuffle=!!_.isUndefined(t.optionShuffle)||t.optionShuffle;var i=e.getItems(t.items,"templateId");_.isUndefined(this.config.media)&&(e.hasTemplateMedia=!1,e.getItems(t.items,"media").forEach(function(t,i){e.addMediatoManifest(t)}));var s=this.parent;this.parent=void 0;var n=[],a=[],o=0;if((EkstepEditorAPI._.isUndefined(e.data.template)||0==e.data.template.length||!e.hasTemplateMedia)&&_.size(i)>0)for(var r in i)EkstepEditor.assessmentService.getTemplate(i[r],function(r,d){try{if(!d)throw o++,a.push(r.config.url),Error(r);o++,_.isUndefined(d.data.result.content)?a.push(d.config.url):d.data.result.content.body?n.push(e.convert(d)):a.push(d.config.url)}catch(e){console.warn("Invalid Template",e)}o>=_.size(i)&&(e.showpopupMessage(i,_.uniq(a),s),0===_.size(a)&&e.showQuizbgImage(t,s)),e.data.template=e.getTemplateData(n)});else e.showQuizbgImage(t,s)},showQuizbgImage:function(e,t){var i=this,s=EkstepEditorAPI.globalContext.useProxyForURL?"/plugins/":"/content-plugins/",n=EkstepEditor.config.absURL+s+"org.ekstep.quiz-1.0/editor/assets/QuizImage.png";fabric.Image.fromURL(n,function(s){var n=e.total_items+"/"+i.getItems(e.items),a=i.getPropsForEditor(e.title,n,e.max_score);i.editorObj=new fabric.Group([s,a]),i.parent=t,i.postInit()},i.convertToFabric(i.attributes))},getItems:function(e,t){var i=[],s=[];for(var n in e)i=e[n];return"templateId"===t?_.uniq(_.filter(_.map(i,"template_id"),Boolean)):"media"===t?(i.forEach(function(e,t){s.push(e.media)}),s):i.length},getTemplateData:function(e){var t=this,i=[];return e.forEach(function(e,s){_.isNull(e)||(_.isArray(e.template)?$.merge(i,e.template):i.push(e.template),_.isUndefined(e.manifest)||t.addMediatoManifest(e.manifest.media))}),i.filter(Boolean)},renderQuiz:function(e,t){var i=this,s=[];_.each(t.items,function(e){_.isUndefined(e.question)||(e.question=i.parseItem(e.question)),s.push(e.question)}),i.setQuizdata(s,t.config)},showpopupMessage:function(e,t,i){var s=this,n=[],a=s.data.questionnaire;for(id in e)for(errId in t)t[errId].indexOf(e[id])>-1&&n.push(e[id]);if(_.size(n)===_.size(t)&&_.size(n)>0){var o=EkstepEditorAPI.globalContext.useProxyForURL?"/plugins/":"/content-plugins/";EkstepEditorAPI.getService("popup").open({showClose:!1,template:EkstepEditor.config.absURL+o+"org.ekstep.quiz-1.0/editor/warning.html",controller:["$scope",function(e){e.callClear=function(){s.clearItem(a,n,function(){s.showQuizbgImage(a,i)}),e.closeThisDialog()},e.dontClear=function(){e.closeThisDialog()},e.header="Clean-up Question Set",e.errorMessage="There are few invalid questions in the question set being created. Would you like to remove the questions?",e.invalidQuestioncount=s.getInvlidQuestioncount(a,n)}]})}},clearItem:function(e,t,i){console.info("Error Template_id List:",t);var s=e.item_sets[0].id;e.items[s].forEach(function(i,n){t.includes(i.template_id)?delete e.items[s][n]:console.info("Item is not deleted")}),e.items[s]=_.filter(e.items[s],Boolean),e.item_sets[0].count=e.items[s].length,e.total_items=e.item_sets[0].count,i()},getInvlidQuestioncount:function(e,t){var i=e.item_sets[0].id,s=0;return e.items[i].forEach(function(e,i){t.includes(e.template_id)?s++:console.info("Not presetn")}),s+" out of "+e.total_items+" questions will be removed. "},setQuizdata:function(e,t){var i=this,s={},n={},a={questionnaire:{}};s[e[0].identifier]=e,a.questionnaire.items=s,a.questionnaire.item_sets=[{count:t.total_items,id:e[0].identifier}],a.questionnaire=Object.assign(a.questionnaire,t),i.addConfig("type","items"),i.addConfig("var","item"),i.setData(a),n.data={__cdata:JSON.stringify(a)},n.config={__cdata:JSON.stringify({type:"items",var:"item"})},EkstepEditorAPI.dispatchEvent(i.manifest.id+":create",n)},parseItem:function(e){return $.each(e,function(t,i){"options"!==t&&"lhs_options"!==t&&"rhs_options"!==t&&"model"!==t&&"answer"!==t&&"media"!==t||(e[t]=_.isObject(e[t])?e[t]:JSON.parse(e[t]))}),e},addMediatoManifest:function(e){var t=this;_.isUndefined(e)||(_.isArray(e)?e.forEach(function(i,s){_.isNull(e[s].id)||_.isNull(e[s].src)||(e[s].preload="true",t.addMedia(e[s]),t.addMediaToConfig(e[s]))}):(e.preload="true",t.addMedia(e),t.addMediaToConfig(e)))},addMediaToConfig:function(e){e.src&&(EkstepEditor.mediaManager.getMediaOriginURL(e.src),this.mediaObj[e.id]=e,this.addConfig("media",this.mediaObj))},addMediaFromConfig:function(){var e=this;_.isUndefined(this.config.media)||_.forIn(this.config.media,function(t,i){e.addMedia(t)})},convert:function(e){var t,i=new X2JS({attributePrefix:"none"});if(!_.isNull(e))return 0===e.data.result.content.body.lastIndexOf("{",0)?(t=JSON.parse(e.data.result.content.body),t.theme):(t=i.xml_str2json(e.data.result.content.body),t.theme)},getPropsForEditor:function(e,t,i){return e=new fabric.Text(e.toUpperCase(),{fontSize:15,fill:"black",textAlign:"center",top:32,left:105}),t=new fabric.Text(t+"  Questions,",{fontSize:12,fill:"black",top:49,left:105}),i=new fabric.Text(i+" Marks",{fontSize:12,fill:"black",top:49,left:190}),fabricGroup=new fabric.Group([e,t,i]),fabricGroup},onConfigChange:function(e,t){if(!_.isUndefined(t)){var i=this.getItems(this.data.questionnaire.items);switch(e){case"title":this.config.title=t,this.data.questionnaire.title=t,this.editorObj._objects[1]._objects[0].setText(t.toUpperCase());break;case"total_items":this.config.total_items=t,this.data.questionnaire.total_items=t,this.editorObj._objects[1]._objects[1].setText(t+"/"+i+"Questions,");break;case"max_score":this.config.max_score=t,this.data.questionnaire.max_score=t,this.editorObj._objects[1]._objects[2].setText(t+"Marks");break;case"shuffle":this.config.shuffle=t,this.data.questionnaire.shuffle=t;break;case"showImmediateFeedback":this.config.showImmediateFeedback=t,this.data.questionnaire.showImmediateFeedback=t;break;case"optionShuffle":this.config.optionShuffle=t,this.data.questionnaire.optionShuffle=t}}EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{target:EkstepEditorAPI.getEditorObject()})},getConfig:function(){var e=this._super();return e.shuffle=this.data.questionnaire.shuffle,e.total_items=this.data.questionnaire.total_items,e.showImmediateFeedback=this.data.questionnaire.showImmediateFeedback,e.max_score=this.data.questionnaire.max_score,e.title=this.data.questionnaire.title,e.optionShuffle=this.data.questionnaire.optionShuffle,e},openAssessmentBrowser:function(e,t){var i=this,t=function(e,t){var s={items:e,config:t};EkstepEditorAPI.dispatchEvent(i.manifest.id+":renderQuiz",s)};EkstepEditorAPI.dispatchEvent("org.ekstep.assessmentbrowser:show",t)}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.stageconfig","ver":"1.0","author":"Sunil","title":"Stage Config","description":"","publishedDate":"","editor":{"main":"editor/plugin.js"}},eval('EkstepEditor.basePlugin.extend({type:"org.ekstep.stageconfig",stageAudios:{},scope:EkstepEditorAPI.getAngularScope(),initialize:function(){EkstepEditorAPI.addEventListener(this.manifest.id+":addcomponent",this.register,this),EkstepEditorAPI.addEventListener("stage:render:complete",this.stageRender,this),EkstepEditorAPI.addEventListener(this.manifest.id+":remove",this.removeAudio,this)},register:function(t,e){this.stageAudios[e.stageId]||(this.stageAudios[e.stageId]=[]),this.stageAudios[e.stageId].push(e),this.showComponents(e.stageId)},getStageIndex:function(t){return EkstepEditorAPI._.findIndex(this.stageConfig,function(e){return t.stageId===e.stageId})},addComponents:function(t){var e=this;this.stageAudios[t]||(this.stageAudios[t]=[]);var s=EkstepEditorAPI.getStagePluginInstances(t,["org.ekstep.audio"]);_.each(s,function(s){e.stageAudios[t].push(s.audioData)})},stageRender:function(t,e){this.showComponents(e.stageId)},showComponents:function(t){this.stageAudios[t]||this.addComponents(t);var e=this;this.hideStageComponents(t),setTimeout(function(){e.showStageComponents(t)},500);var e=this;EkstepEditorAPI.ngSafeApply(e.scope,function(){e.scope.currentStage=EkstepEditorAPI.getCurrentStage()})},showStageComponents:function(t){var e=this,s=[],i=[],o=EkstepEditorAPI.getStage(t).event;EkstepEditorAPI._.forEach(o,function(t){"enter"===t.type&&(EkstepEditorAPI._.isArray(t.action)?i.push(t.action[0].asset):i.push(t.action.asset))}),EkstepEditorAPI._.forEach(this.stageAudios[t],function(t){EkstepEditorAPI._.indexOf(i,t.id)!=-1?t.autoplay=!0:t.autoplay=!1,s.push(t)}),EkstepEditorAPI.ngSafeApply(e.scope,function(){e.scope.stageAttachments.audio={},e.scope.stageAttachments.audio.items=s,e.scope.stageAttachments.audio.show=!0})},hideStageComponents:function(t){var e=this;EkstepEditorAPI.ngSafeApply(e.scope,function(){e.scope.stageAttachments.audio={},e.scope.stageAttachments.audio.items=[],e.scope.stageAttachments.audio.show=!1})},removeAudio:function(t,e){this.stageAudios[e.stageId]=EkstepEditorAPI._.reject(this.stageAudios[e.stageId],{id:e.id}),this.showComponents(e.stageId)}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.telemetry","ver":"1.0","author":"Sunil A S","title":"Telemetry Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js"}},eval('"use strict";EkstepEditor.basePlugin.extend({type:"org.ekstep.telemetry",service:void 0,initialize:function(){this.service=EkstepEditorAPI.getService("telemetry"),EkstepEditorAPI.addEventListener("content:onload",this.registerEvents,this)},registerEvents:function(){var e=this;EkstepEditorAPI.addEventListener("object:selected",function(t,i){i&&i.id&&""!=i.id&&e.interactEvent("select","","plugin",i.type,i.ver,i.id)},this),EkstepEditorAPI.addEventListener("object:modified",function(t,i){i&&i.id&&""!=i.id&&(console.log("event",t),e.interactEvent("modify","","plugin",i.type,i.ver,i.id))},this),EkstepEditorAPI.addEventListener("object:unselected",function(t,i){i&&i.id&&""!=i.id&&e.interactEvent("unselect","","plugin",i.type,i.ver,i.id)},this),EkstepEditorAPI.addEventListener("object:removed",function(e,t){if(t&&t.id&&""!=t.id){var i=EkstepEditorAPI.getPluginInstance(t.id);this.service.pluginLifeCycle({type:"remove",pluginid:i.manifest.id,pluginver:i.manifest.ver,objectid:i.id,assetid:i.getAttribute("asset"),stage:EkstepEditorAPI.getCurrentStage().id,containerid:"",containerplugin:""})}},this),EkstepEditorAPI.addEventListener("stage:removed",function(e,t){if(console.log("stage delete",t),t&&t.stageId&&""!=t.stageId){var i=EkstepEditorAPI.getPluginInstance(t.stageId);this.service.pluginLifeCycle({type:"remove",pluginid:i.manifest.id,pluginver:i.manifest.ver,objectid:i.id,assetid:i.getAttribute("asset"),stage:i.id,containerid:"",containerplugin:""})}},this),EkstepEditorAPI.addEventListener("stage:delete",function(t,i){i&&i.stageId&&""!=i.stageId&&e.interactEvent("click","delete","plugin","org.ekstep.stage","1.0",i.stageId)},this),EkstepEditorAPI.addEventListener("stage:duplicate",function(t,i){i&&i.stageId&&""!=i.stageId&&e.interactEvent("duplicate","","plugin","org.ekstep.stage","1.0",i.stageId)},this),EkstepEditorAPI.addEventListener("stage:select",function(t,i){i&&i.stageId&&""!=i.stageId&&e.interactEvent("select","","plugin","org.ekstep.stage","1.0",i.stageId)},this),EkstepEditorAPI.addEventListener("stage:reorder",function(t,i){i&&i.stageId&&""!=i.stageId&&e.interactEvent("modify","reorder","stage","org.ekstep.stage","1.0",i.stageId)},this)},interactEvent:function(e,t,i,s,n,d){this.service.interact({type:e,subtype:t,target:i,pluginid:s,pluginver:n,objectid:d,stage:EkstepEditorAPI.getCurrentStage().id})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.copypaste","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Copy paste Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[{"id":"copy","category":"context","type":"icon","toolTip":"copy","title":"copy","iconClass":"copy icon","state":"HIDE","onclick":{"id":"copy:copyItem","data":{}}},{"id":"paste","category":"context","type":"icon","toolTip":"paste","title":"paste","iconClass":"paste icon","state":"HIDE","onclick":{"id":"paste:pasteItem","data":{}}}]}},eval('EkstepEditor.basePlugin.extend({type:"copypaste",clipboard:void 0,initialize:function(){EkstepEditorAPI.addEventListener("copy:copyItem",this.copyItem,this),EkstepEditorAPI.addEventListener("paste:pasteItem",this.pasteItem,this),EkstepEditorAPI.addEventListener("object:selected",this.objectSelected,this),EkstepEditorAPI.addEventListener("object:unselected",this.objectUnSelected,this)},copyItem:function(){this.clipboard=EkstepEditorAPI.getCurrentObject()?EkstepEditorAPI.getCurrentObject():EkstepEditorAPI.getCurrentGroup(),EkstepEditorAPI.updateContextMenu({id:"paste",state:"SHOW",data:{}})},pasteItem:function(){_.isArray(this.clipboard)?(EkstepEditorAPI.getCanvas().discardActiveGroup(),this.clipboard.forEach(function(t){EkstepEditorAPI.cloneInstance(t)})):EkstepEditorAPI.cloneInstance(this.clipboard),this.clipboard=void 0,EkstepEditorAPI.updateContextMenu({id:"paste",state:"HIDE",data:{}})},objectSelected:function(t,e){EkstepEditorAPI.updateContextMenu({id:"copy",state:"SHOW",data:{}})},objectUnSelected:function(t,e){EkstepEditorAPI.updateContextMenu({id:"copy",state:"HIDE",data:{}})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.delete","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Delete Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[{"id":"delete","category":"context","type":"icon","toolTip":"Delete","title":"Delete","iconClass":"trash outline icon","state":"HIDE","onclick":{"id":"delete:invoke","data":{}}}]}},eval('EkstepEditor.basePlugin.extend({type:"delete",picker:void 0,initialize:function(){EkstepEditorAPI.addEventListener("delete:invoke",this.deleteObject,this),EkstepEditorAPI.addEventListener("object:selected",this.objectSelected,this),EkstepEditorAPI.addEventListener("object:unselected",this.objectUnSelected,this)},deleteObject:function(e,t){var i=EkstepEditorAPI.getEditorGroup(),d=EkstepEditorAPI.getEditorObject(),o=this;d?o.remove(d):i&&(EkstepEditorAPI.getCanvas().discardActiveGroup(),i.getObjects().forEach(function(e){o.remove(e)}))},remove:function(e){EkstepEditorAPI.dispatchEvent("delete:invoked",{editorObj:EkstepEditorAPI.getPluginInstance(e.id).attributes}),EkstepEditorAPI.getCanvas().remove(e),EkstepEditorAPI.dispatchEvent("stage:modified",{id:e.id})},objectSelected:function(e,t){EkstepEditorAPI.updateContextMenu({id:"delete",state:"SHOW",data:{}})},objectUnSelected:function(e,t){EkstepEditorAPI.updateContextMenu({id:"delete",state:"HIDE",data:{}})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.reorder","ver":"1.0","author":"Santhosh Vasabhaktula","title":"Re-order Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[{"id":"reorder","category":"context","type":"icon","toolTip":"Re-order","title":"Reorder","iconClass":"sort icon","state":"HIDE","submenu":[{"id":"sendtofront","category":"context","type":"icon","toolTip":"Bring forward","title":"Bring to front","iconClass":"icon-bringfront icon","onclick":{"id":"reorder:sendtofront","data":{}}},{"id":"sendtoback","category":"context","type":"icon","toolTip":"Send backward","title":"Send to back","iconClass":"icon-sendback icon","onclick":{"id":"reorder:sendtoback","data":{}}}]}]}},eval('EkstepEditor.basePlugin.extend({type:"reorder",picker:void 0,initialize:function(){EkstepEditorAPI.addEventListener("reorder:sendtofront",this.sendToFront,this),EkstepEditorAPI.addEventListener("reorder:sendtoback",this.sendToBack,this),EkstepEditorAPI.addEventListener("object:selected",this.objectSelected,this),EkstepEditorAPI.addEventListener("object:unselected",this.objectUnSelected,this)},sendToFront:function(t,e){EkstepEditorAPI.getCanvas().bringForward(EkstepEditorAPI.getEditorObject()),EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{id:EkstepEditorAPI.getEditorObject().id})},sendToBack:function(t,e){EkstepEditorAPI.getCanvas().sendBackwards(EkstepEditorAPI.getEditorObject()),EkstepEditorAPI.render(),EkstepEditorAPI.dispatchEvent("object:modified",{id:EkstepEditorAPI.getEditorObject().id})},objectSelected:function(t,e){EkstepEditorAPI.updateContextMenu({id:"reorder",state:"SHOW",data:{}})},objectUnSelected:function(t,e){EkstepEditorAPI.updateContextMenu({id:"reorder",state:"HIDE",data:{}})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.templatebrowser","ver":"1.0","shortId":"templatebrowser","author":"Sunil A S","title":"Activity Browser","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[{"id":"templatebrowser","category":"main","type":"icon","toolTip":"Add Activity","title":"Activity","iconClass":"icon-activity icon","onclick":{"id":"org.ekstep.templatebrowser:show"}}]}},eval('"use strict";EkstepEditor.basePlugin.extend({callback:void 0,initialize:function(){EkstepEditorAPI.addEventListener(this.manifest.id+":show",this.initPreview,this),setTimeout(function(){var e=EkstepEditor.config.pluginRepo+"/org.ekstep.templatebrowser-1.0/editor/templateBrowser.html",t=EkstepEditor.config.pluginRepo+"/org.ekstep.templatebrowser-1.0/editor/templatebrowserapp.js";EkstepEditorAPI.getService("popup").loadNgModules(e,t)},1e3)},initPreview:function(e,t){var i=this;i.callback=t,EkstepEditorAPI.getService("popup").open({template:"partials_org.ekstep.templatebrowser.html",controller:"templatebrowser",controllerAs:"$ctrl",resolve:{instance:function(){return i}},showClose:!1,width:900,className:"ngdialog-theme-plain"})},getTemplates:function(e,t){var i,s,o=new EkstepEditor.iService;i={request:{filters:{objectType:["AssessmentItem"]}}},s={headers:{"Content-Type":"application/json","user-id":"ATTool"}},_.isUndefined(e)?null:i.request.filters.name=[e],o.http.post(EkstepEditor.config.baseURL+"/api/search/v2/search",i,s,t)}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.atpreview","ver":"1.0","author":"Sunil A S","title":"preview","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[]}},eval('EkstepEditor.basePlugin.extend({type:"atpreview",previewURL:"preview/preview.html?webview=true",contentBody:void 0,initialize:function(){EkstepEditorAPI.addEventListener("atpreview:show",this.initPreview,this);var e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.atpreview-1.0/editor/popup.html";EkstepEditorAPI.getService("popup").loadNgModules(e)},initPreview:function(e,t){this.contentBody=t.contentBody,t.currentStage&&(this.contentBody.theme.startStage=EkstepEditorAPI.getCurrentStage().id),this.showPreview()},showPreview:function(){console.log(this.previewURL);var e=this,t=(EkstepEditorAPI.getService("content"),EkstepEditorAPI.getService("content").getContentMeta(EkstepEditorAPI.globalContext.contentId)),o=function(o){o.$on("ngDialog.opened",function(){var o=EkstepEditorAPI.jQuery("#previewContentIframe")[0];o.src=e.previewURL,t.contentMeta=_.isUndefined(t.contentMeta)?null:t.contentMeta,o.onload=function(){o.contentWindow.setContentData(t.contentMeta,e.contentBody,{showStartPage:!0,showEndPage:!0})}})};EkstepEditorAPI.getService("popup").open({template:"partials_org.ekstep.atpreview.html",controller:["$scope",o],showClose:!1,width:900,className:"ngdialog-theme-plain"})}});'))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.todo-1.0/editor/todo.css'>")
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.todo-1.0/editor/moment.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.todo-1.0/editor/hybridtodo.jQuery.js'>"))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.todo-1.0/editor/jquery-comments.js'>"))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.todo-1.0/editor/jquery-comments.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.todo","ver":"1.0","author":"Gourav More","title":"Concept Selector Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"css","src":"editor/todo.css"},{"type":"js","src":"editor/moment.js"},{"type":"js","src":"editor/hybridtodo.jQuery.js"},{"type":"js","src":"editor/jquery-comments.js"},{"type":"css","src":"editor/jquery-comments.css"}]}},eval('EkstepEditor.basePlugin.extend({initialize:function(){this.initData(),EkstepEditorAPI.addEventListener("stage:select",this.controllerCallback,this)},initData:function(){},controllerCallback:function(t,e){ctrl=this,setTimeout(function(){ctrl.initializeTodoWidget()},3e3),ctrl.initializeTodoWidget=function(){var t,a={};EkstepEditorAPI._.isUndefined(window.context)||EkstepEditorAPI._.isUndefined(window.context.content_id)||""==window.context.content_id||(a.url="index.php?option=com_ekcontent&view=content&id="+window.context.id,a.type="todos",a.subtype="reviewer#"+e.stageId,a.client="content.jlike_ekcontent",a.cont_id=window.context.id,a.title=EkstepEditorAPI.getService("content").getContentMeta(window.context.content_id).contentMeta.name,t=EkstepEditorAPI.jQuery("#pageLevelTodos"),EkstepEditorAPI.jQuery(t).attr("data-jlike-url",a.url),EkstepEditorAPI.jQuery(t).attr("data-jlike-status",a.status),EkstepEditorAPI.jQuery(t).attr("data-jlike-type",a.type),EkstepEditorAPI.jQuery(t).attr("data-jlike-subtype",a.subtype),EkstepEditorAPI.jQuery(t).attr("data-jlike-client",a.client),EkstepEditorAPI.jQuery(t).attr("data-jlike-cont-id",a.cont_id),EkstepEditorAPI.jQuery(t).attr("data-jlike-title",a.title),a.content_id=EkstepEditorAPI.jQuery(t).attr("data-jlike-contentid"),a.assigned_by=EkstepEditorAPI.jQuery(t).attr("data-jlike-assigned_by"),a.assigned_to=EkstepEditorAPI.jQuery(t).attr("data-jlike-assigned_to"),a.state=1,a.status="I",ctrl.getTodos(t,a,"#pageLevelTodos"),a.status="C",ctrl.getTodos(t,a,"#pageLevelResolvedTodos"))},ctrl.getTodos=function(t,e,a){var i="";i=e.status,EkstepEditorAPI.jQuery(t).hybridtodo({apiRequestParams:e,action:"getTodosAndComments",callback:function(t){ctrl.renderHybridTodos(t,i,a)}})},ctrl.updateStatus=function(t){var e,a,i,d,r;a="C",i=EkstepEditorAPI.jQuery(t).attr("data-jlike-id"),d=EkstepEditorAPI.jQuery(t).attr("data-ek-todomsg"),r=EkstepEditorAPI.jQuery(t).attr("data-jlike-context"),e=EkstepEditorAPI.jQuery("#todoThreadId"+parseInt(i)),ctrl.save(e,a,i,d,r),EkstepEditorAPI.jQuery("#"+i).prop("disabled",!0),EkstepEditorAPI.jQuery("#todoWrapper"+i).hide(1e3)},ctrl.save=function(t,e,a,i,d){var r={};r.id=a,r.sender_msg=i,r.url=EkstepEditorAPI.jQuery(t).attr("data-jlike-url"),r.cont_id=EkstepEditorAPI.jQuery(t).attr("data-jlike-cont-id"),r.type="todos",r.subtype=d,r.client=EkstepEditorAPI.jQuery(t).attr("data-jlike-client"),r.content_id=EkstepEditorAPI.jQuery(t).attr("data-jlike-contentid"),r.assigned_by=EkstepEditorAPI.jQuery(t).attr("data-jlike-assigned_by"),r.assigned_to=EkstepEditorAPI.jQuery(t).attr("data-jlike-assigned_to"),r.state=1,r.status="C",EkstepEditorAPI.jQuery(t).hybridtodo({apiPostParams:r,action:"createTodo"})},ctrl.renderHybridTodos=function(t,e,a){var i=["<div class=\'todo-wrapper\' id=\'todoWrapper<%= id %>\'>","<div clss=\'ui grid\'>","<div class=\'ui three column grid row\'>","<div class=\'two wide column user-avatar\'>","<img src=\'<%= assigned_by.avatar %>\' class=\'ui avatar image\' style=\'width:33px; height:33px;max-width:inherit\'>","</div>","<div class=\'six wide column\' id=\'reviewerInfoHolder\'>","<div class=\'row reviewer-name\'>","<a class=\'reviewer-name\' href=\'<%= assigned_by.profile_link %>\'><%= assigned_by.name %></a>","</div>","<div class=\'row\'>","<time><%= moment(created).format(\'HH:mm, DD/MM/YYYY\') %></time>","</div>","</div>","<div class=\'one wide column right floated\'>","<button type=\'button\' class=\'ui tiny icon button right floated basic\' id=\'<%= id %>\' data-jlike-id=\'<%= id %>\' data-ek-todomsg=\'<%= sender_msg %>\' data-jlike-context=\'<%= context %>\' onClick=\'ctrl.updateStatus(this)\' <%= disabledAttr %>><%= buttonName %></button>","</div>","</div>","</div>","<div class=\'row\' id=\'todoTitle\'>","<span class=\'row four wide column\'><%= title %></span>","</div>","<div class=\'row todo-comment\'>","<label class=\'left floated\'><%= sender_msg %></label>","</div></br>","<div id=\'todoThreadId<%= id %>\' class=\'list-unstyled\' data-jlike-client=\'content.jlike_ekcontent\' data-jlike-type=\'annotations\' data-jlike-subtype=\'com_ekcontent.reviewers\' data-jlike-context=\'reviewer#todo#<%= id %>\' data-jlike-limitstart=\'0\' data-jlike-limit=\'2\' <% if (readOnly){ %> data-jlike-readonly=\'<%= readOnly %>\'<% } %> data-jlike-contentid=\'<%= content_id %>\' data-jlike-ordering=\'annotation_date\'></div>","</div>"];if(i=i.join(""),EkstepEditorAPI.jQuery(a).html(""),1==t.success){EkstepEditorAPI.jQuery("#noIssueFound").hide();for(var d=0;d<t.data.result.length;d++){t.data.result[d].buttonName="I"==t.data.result[d].status?"Resolve":"Resolved",t.data.result[d].disabledAttr="I"==t.data.result[d].status?"":"disabled",t.data.result[d].readOnly="I"!=t.data.result[d].status;for(var r=0;r<t.data.result[d].comments.length;r++)t.data.result[d].comments[r].user_name=t.data.result[d].comments[r].user.name,t.data.result[d].comments[r].user_id=t.data.result[d].comments[r].user.id,t.data.result[d].comments[r].profile_picture_url=t.data.result[d].comments[r].user.avatar,t.data.result[d].comments[r].profile_url=t.data.result[d].comments[r].user.profile_link,t.data.result[d].comments[r].created=moment(t.data.result[d].comments[r].annotation_date).format("HH:mm, MMM Do YYYY");var s="",o=t.data.result[d],n=_.template(i);s+=n(o),"I"==t.data.result[d].status?EkstepEditorAPI.jQuery(a).append(s):EkstepEditorAPI.jQuery(a).append(s),jQuery("#todoThreadId"+t.data.result[d].id).hybridtodo({arrData:t.data.result[d].comments,action:"renderHybridTodos",userProfile:t.data.userinfo})}}else if(0==t.success&&"I"==e){var l="";jQuery(a).html("");var l=\'<div class="ui grid" id="noIssueFound" style="padding-top: 22px;"><div class="ui one column stackable center aligned page grid"><i class="fa fa-comments-o fa-2x" aria-hidden="true"></i><br>No issues found</div></div>\';EkstepEditorAPI.jQuery(a).html(l)}}}});'))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.activitybrowser-1.0/editor/plugin.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.activitybrowser","ver":"1.0","author":"Harish Kumar Gangula","title":"Activity Browser Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"css","src":"editor/plugin.css"}],"menu":[{"id":"activitybrowser","category":"main","type":"icon","toolTip":"Add Activity","title":"Activity Browser","iconClass":"list layout icon","onclick":{"id":"org.ekstep.activitybrowser:showpopup"}}],"configManifest":[]}},eval('EkstepEditor.basePlugin.extend({currentInstance:void 0,initialize:function(){EkstepEditorAPI.addEventListener("org.ekstep.activitybrowser:showpopup",this.loadBrowser,this),setTimeout(function(){var t=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.activitybrowser-1.0/editor/activityBrowser.html",e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.activitybrowser-1.0/editor/activityBrowser.js";EkstepEditorAPI.getService("popup").loadNgModules(t,e)},1e3)},newInstance:function(){},loadBrowser:function(){currentInstance=this,EkstepEditorAPI.getService("popup").open({template:"activityBrowser",controller:"activityBrowserCtrl",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},width:900,showClose:!1,className:"ngdialog-theme-plain"},function(){})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.collaborator","ver":"1.0","author":"Gourav More","title":"collaborator","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[]}},eval('EkstepEditor.basePlugin.extend({type:"collaborator",initialize:function(){EkstepEditorAPI.addEventListener("collaborator:add",this.addCollaborator,this);var e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.collaborator-1.0/editor/popup.html";EkstepEditorAPI.getService("popup").loadNgModules(e)},addCollaborator:function(e,o){this.showPreview(function(){EkstepEditorAPI.jQuery("#colUsersDropdown").dropdown({apiSettings:{url:EkstepEditorAPI.baseURL+"/index.php?option=com_ekcontent&task=contentform.getUsersToInvite&id="+window.context.id+"&isEditor=true&search={query}",cache:!0},saveRemoteData:!0,fields:{remoteValues:"results",values:"values",name:"name",text:"text",value:"value"},forceSelection:!1})}),this.collaboratorsInfo()},showPreview:function(e){var o=this,t=function(t){t.getUrlLink=o.getUrlLink,t.viewContentLink=window.context.viewContentLink,t.sendInvites=o.sendInvites,o.copyAnswer="Copy",t.copyAnswer=o.copyAnswer,t.notifyUser=o.notifyUser,t.contentId=window.context.id,t.collaborators=o.collaborators,t.loading=o.loading,t.isLoading=o.isLoading,t.isError=o.isError,t.$on("ngDialog.opened",function(o,t){e()})};EkstepEditorAPI.getService("popup").open({template:"partials_org.ekstep.collaborator.html",controller:["$scope",t],showClose:!1,width:900,className:"ngdialog-theme-default"})},getUrlLink:function(){var e=this;EkstepEditorAPI.jQuery("#copyTarget").select();try{var o=document.execCommand("copy");o?e.copyAnswer="Copied!":e.copyAnswer="Unable to copy!"}catch(o){e.copyAnswer="Unsupported Browser!"}},sendInvites:function(){var e=this;EkstepEditorAPI.jQuery("#colInviteForm").form({inline:!0,fields:{inviteUsers:{identifier:"inviteUsers",rules:[{type:"empty",prompt:"Please select usernames"}]},invite_msg:{identifier:"invite_msg",rules:[{type:"empty",prompt:"Invite message should not be blank"}]}},onSuccess:function(o,t){e.notifyUser(o,t)},onFailure:function(e,o){return console.log("fields validation failed"),!1}})},notifyUser:function(e,o){var t=this;EkstepEditorAPI.jQuery.ajax({url:EkstepEditorAPI.baseURL+"/index.php?option=com_ekcontent&task=contentform.inviteUsers",headers:{"x-auth":"session"},type:"POST",data:o,async:!1,beforeSend:function(){t.loading="active",t.isLoading=!0,t.isError=!1,EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope())},success:function(e){1==e?(t.isLoading=!1,EkstepEditorAPI.jQuery(".collaborator_msg").transition("drop"),EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope())):(t.isError=!0,EkstepEditorAPI.jQuery(".collaborator_msg").transition("drop"),EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope()))},error:function(){console.log("Error")}})},collaboratorsInfo:function(){var e=this;EkstepEditorAPI.jQuery.ajax({url:EkstepEditorAPI.baseURL+"/index.php?option=com_api&app=ekcontent&resource=collaborator&format=raw",headers:{"x-auth":"session"},type:"GET",data:{id:window.context.id},async:!1,success:function(o){o?e.collaborators=o.result.collaborators:e.collaborators=null},error:function(){console.log("Error")}})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.download","ver":"1.0","author":"Gourav More","title":"download","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[]}},eval('EkstepEditor.basePlugin.extend({type:"download",initialize:function(){EkstepEditorAPI.addEventListener("download:content",this.downloadContent,this);var t=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.download-1.0/editor/popup.html";EkstepEditorAPI.getService("popup").loadNgModules(t)},downloadContent:function(){var t=this;t.isSending="active",t.isLoading=!1,t.isSuccess=!1,t.isDownloading=!0;var e=function(e){e.isSending=t.isSending,e.isLoading=t.isLoading,e.isSuccess=t.isSuccess,e.isDownloading=t.isDownloading,e.cntName=EkstepEditorAPI.getService("content").getContentMeta(window.context.content_id).contentMeta.name,t.getDownloadUrl(function(n){n?(e.isLoading=!0,e.isDownloading=!1,EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope()),t.sendEmail(e,n)):(e.isLoading=!1,e.isDownloading=!1,e.status=!1,e.getMessage="Content is not ready to download, please try again later",EkstepEditorAPI.jQuery(".ct_download_msg").transition("drop"),EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope()))})};EkstepEditorAPI.getService("popup").open({template:"partials_org.ekstep.download.html",controller:["$scope",e],showClose:!1,width:900,background:"transparent!important",className:"ngdialog-theme-plain dwContent"})},getDownloadUrl:function(t){var e=EkstepEditorAPI.getService("content").getContentMeta(window.context.content_id).contentMeta.name.toLowerCase();EkstepEditorAPI.getService("content").downloadContent(window.context.content_id,e,function(e,n){t(e||"OK"!=n.data.responseCode?!1:n.data.result.ECAR_URL)})},sendEmail:function(t,e){EkstepEditorAPI.jQuery.ajax({url:EkstepEditorAPI.baseURL+"/index.php?option=com_api&app=ekcontent&resource=download&format=raw",headers:{"x-auth":"session"},type:"POST",data:{downloadUrl:e,name:EkstepEditorAPI.getService("content").getContentMeta(window.context.content_id).contentMeta.name},success:function(e){t.isLoading=!1,t.status="OK"==e.responseCode,t.getMessage=e.result,EkstepEditorAPI.jQuery(".ct_download_msg").transition("drop"),EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope())},error:function(){t.isLoading=!1,t.status=!1,t.getMessage="Unable to send email, please try again later",EkstepEditorAPI.jQuery(".ct_download_msg").transition("drop"),EkstepEditorAPI.ngSafeApply(EkstepEditorAPI.getAngularScope())}})}});'))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.unsupported","ver":"1.0","author":"Harish Kumar Gangula","title":"Unsupported Plugin","description":"This plugin is fallback to the other plugins","publishedDate":"","editor":{"main":"editor/plugin.js","menu":[],"help":{"src":"editor/help.md","dataType":"text"}}},eval('EkstepEditor.basePlugin.extend({type:"unsupported",initialize:function(){EkstepEditorAPI.addEventListener("unsupported:invoke",this.showUnsupported,this)},props:{x:0,y:0,w:40,h:40,r:0},hasDims:!1,newInstance:function(){var t=this,i=this.parent;this.parent=void 0;var a=this.setImageDimensions(this.data.data),s=EkstepEditorAPI.absURL+EkstepEditorAPI.getPluginRepo()+"/org.ekstep.unsupported-1.0/assets/unsupportedplugin.png";fabric.Image.fromURL(s,function(a){t.editorObj=a,t.parent=i,t.postInit()},a)},setImageDimensions:function(t){var i=_.clone(this.props);return _.has(t,["x"])&&_.has(t,["w"])&&(this.attributes.x=i.x=t.x,this.attributes.y=i.y=t.y,this.attributes.w=i.w=t.w,this.attributes.h=i.h=t.h,this.percentToPixel(this.attributes),this.hasDims=!0),this.percentToPixel(i),this.convertToFabric(i)},fromECML:function(t){t.data.id=t.data.id||t.data.pluginId,this.setData(t.data)},toECML:function(){if(this.hasDims){var t=_.clone(this.attributes);this.pixelToPercent(t),this.data.data.x=t.x,this.data.data.y=t.y,this.data.data.w=t.w,this.data.data.h=t.h}return this.data.data},getCopy:function(){var t=this;return{data:{data:_.cloneDeep(this.toECML()),pluginId:t.data.id}}},getConfig:function(){},getAttributes:function(){},getManifestId:function(){return this.data.id}});'))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.wordinfotext-1.0/editor/plugin.css'>")
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.wordinfotext","ver":"1.0","shortId":"wordinfotext","author":"Kartheek Palla","title":"Add Word Info Popup","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","help":{"src":"editor/help.md","dataType":"text"},"dependencies":[{"type":"css","src":"editor/plugin.css"}],"configManifest":[{"propertyName":"color","title":"Font color","description":"Choose a color from the color picker","dataType":"colorpicker","required":true,"defaultValue":"rgb(255,0,0)"},{"propertyName":"font","dataType":"group","description":"Choose fontweight and fontstyle","config":[{"propertyName":"fontweight","title":"Font Weight","toolTip":"Bold","description":"Select font size for the text","dataType":"icon","iconClass":"bold icon","required":true,"defaultValue":false},{"propertyName":"fontstyle","title":"Font Style","toolTip":"Italic","description":"Select font style for the text","dataType":"icon","iconClass":"italic icon","required":true,"defaultValue":false}]},{"propertyName":"fontfamily","title":"Font Family","description":"Select font family for the text","dataType":"select","range":["Arial","Courier","Georgia","Helvetica","Monospace","Sans-serif","Serif","Tahoma","Times","Trebuchet MS","Verdana","NotoSansKannada","NotoSansGujarati","NotoSansBengali","NotoSansGurmukhi","NotoSansOriya","NotoSansDevanagari","NotoSansTamil","NotoSansTelugu","NotoNastaliqUrdu","NotoSansMalayalam"],"required":true,"defaultValue":"Sans-serif"},{"propertyName":"fontsize","title":"Font Size","description":"Select font size for the text","dataType":"select","range":[18,20,22,24,26,28,32,36,40,44,48,54,60,66,72,80,88,96],"required":true,"defaultValue":18},{"propertyName":"wordfontcolor","title":"Word Font Color","description":"Choose a color from the color picker to highlight the font color of selected word","dataType":"colorpicker","required":true,"defaultValue":"#0000FF"},{"propertyName":"wordhighlightcolor","title":"Word Highlight Color","description":"Choose a color from the color picker to highlight the selected word","dataType":"colorpicker","required":true,"defaultValue":"#FFFF00"},{"propertyName":"wordunderlinecolor","title":"Word underline Color","description":"Choose a color from the color picker to underline the selected word","dataType":"colorpicker","required":true,"defaultValue":"#0000FF"}]},"renderer":{"main":"renderer/plugin.js"}},eval('EkstepEditor.basePlugin.extend({type:"wordinfotext",currentInstance:void 0,cb:void 0,text:void 0,initialize:function(){EkstepEditorAPI.addEventListener("object:unselected",this.objectUnselected,this),EkstepEditorAPI.addEventListener("delete:invoked",this.deleteObject,this),EkstepEditorAPI.addEventListener("org.ekstep.wordinfotext:showpopup",this.loadHtml,this),setTimeout(function(){var t=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.wordinfotext-1.0/editor/wordinfotext.html",e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.wordinfotext-1.0/editor/wordinfotextapp.js";EkstepEditorAPI.getService("popup").loadNgModules(t,e)},1e3)},loadHtml:function(t,e){currentInstance=this,this.cb=e.callback,this.attributes=e.textObj.attributes,this.attributes.__text=e.textObj.editorObj.text,this.config=e.textObj.config,"wordinfo"==e.textObj.attributes.textType&&(this.editorObj=e.textObj.editorObj),EkstepEditorAPI.getService("popup").open({template:"wordinfotext",controller:"wordinfotextcontroller",controllerAs:"$ctrl",resolve:{instance:function(){return currentInstance}},width:900,showClose:!1,className:"ngdialog-theme-plain"},function(){})}});'))
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.viewecml-1.0/editor/libs/dist/E2EConverter.js'>"))
EkstepEditor.jQuery("head").append("<link rel='stylesheet' type='text/css' href='/plugins/org.ekstep.viewecml-1.0/editor/libs/prism/prism.css'>")
EkstepEditor.jQuery("body").append($("<script type='text/javascript' src='/plugins/org.ekstep.viewecml-1.0/editor/libs/prism/prism.js'>"))
EkstepEditor.pluginManager.registerPlugin({"id":"org.ekstep.viewecml","ver":"1.0","author":"Anshu Narayan","title":"viewecml Plugin","description":"","publishedDate":"","editor":{"main":"editor/plugin.js","dependencies":[{"type":"js","src":"editor/libs/dist/E2EConverter.js"},{"type":"css","src":"editor/libs/prism/prism.css"},{"type":"js","src":"editor/libs/prism/prism.js"}],"menu":[{}]}},eval('EkstepEditor.basePlugin.extend({type:"viewecml",callback:function(){},initialize:function(){Prism.plugins.NormalizeWhitespace.setDefaults({"break-lines":80}),converter=new E2EConverter,EkstepEditorAPI.addEventListener(this.manifest.id+":show",this.initViewECML,this);var e=EkstepEditorAPI.getPluginRepo()+"/org.ekstep.viewecml-1.0/editor/ECMLbrowser.html";setTimeout(function(){EkstepEditorAPI.getService("popup").loadNgModules(e)},1e3)},initViewECML:function(e,t){var o=this;this.callback=t,this.loadResource("editor/ECMLbrowser.html","html",function(e,t){o.showECMLBrowser(e,t)})},showECMLBrowser:function(e,t){var o,n=this;EkstepEditor.stageManager.toECML();o={template:t,data:{instance:this}},EkstepEditorAPI.getService("popup").open({template:"partials_org.ekstep.ECMLbrowser.html",controller:["$scope",n.controllerCallback],controllerAs:"$ctrl",showClose:!1,width:900,className:"ngdialog-theme-plain"})},controllerCallback:function(e,t){var o=this;o.contentBody="ECML Content",o.previewLoad=function(){var t=EkstepEditor.stageManager.toECML();o.contentBody=converter.buildECML(t,!0),e.$safeApply(function(){setTimeout(function(){Prism.highlightElement(EkstepEditorAPI.jQuery("#xmlBody")[0])},100)})},o.previewLoad(),o.copyToClipboard=function(e){var t,o,n=document.getElementById(e),i="_hiddenCopyText_",r="INPUT"===n.tagName||"TEXTAREA"===n.tagName;if(r)l=n,t=n.selectionStart,o=n.selectionEnd;else{if(l=document.getElementById(i),!l){var l=document.createElement("textarea");l.style.position="absolute",l.style.left="-9999px",l.style.top="0",l.id=i,document.body.appendChild(l)}l.textContent=n.textContent}var s=document.activeElement;l.focus(),l.setSelectionRange(0,l.value.length),console.log(l);var a;try{a=document.execCommand("copy"),window.alert("Copied!")}catch(e){a=!1}return s&&"function"==typeof s.focus&&s.focus(),r?n.setSelectionRange(t,o):l.textContent="",a},o.closeWindow=function(){e.closeThisDialog()}}});var converter;'))
